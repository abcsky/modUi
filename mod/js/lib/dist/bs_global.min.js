/*! builded Tue Aug 11 2015 13:17:24 */

!function(global,undefined){function isArray(a){return/Array/.test(Object.prototype.toString.call(a))}function clone(a){if("object"!=typeof a||null===a)return a;var b=Array.prototype.splice===a.splice?[]:{};for(var c in a)a.hasOwnProperty(c)&&(b[c]=clone(a[c]));return b}function isEqual(a,b){if(typeof a!=typeof b)return!1;var c=!0;return!function d(a,b){if(!c||typeof a!=typeof b)return c=!1,!1;switch(typeof a){case"object":var e;if(null===a||null===b){if(a!==b)return c=!1,!1}else for(e in a)if(a.hasOwnProperty(e)&&(!c||d(a[e],b[e])===!1))return!1;break;case"function":if(a.toString()!==b.toString())return c=!1,!1;break;case"string":case"number":if(a!==b)return c=!1,!1;break;default:if(a!==b)return c=!1,!1}}(a,b),c}function getTopperZIndex(a){for(var b,c,d=function(a){return"auto"==a?1:a},e=a;e;){if(c=$(e).css("position"),/fixed/.test(c)){b=d($(e).css("z-index"));break}/relative|absolute/.test(c)&&(b=d($(e).css("z-index"))),e=e.offsetParent}return Number(b)}function getCssProperty(a){for(var b=a.substr(0,1),c=a.substr(1),d=b.toUpperCase()+c,e=b.toLowerCase()+c,f=[e,"Webkit"+d,"Moz"+d,"O"+d,"Ms"+d],g=document.documentElement.style,h=0,i=f.length;i>h;h++){var j=f[h];if(j in g)return j}return null}function stopBubble(a){a=a||window.event,a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0}function bsPopup(a,b){var c=bsPopup;if(!document.body)return void(c.readyKey=setTimeout(function(){c(a,b)},200));c.myScroll||(document.body.scrollTop+=1,document.documentElement.scrollTop+=1,document.body.scrollTop?c.myScroll=document.body:c.myScroll=document.documentElement,c.TransKey=getCssProperty("transition"),c.queue=[]);var d,e,f,g=document,h={title:"温馨提示",content:"",timeout:2e3,mustConfirm:!1,callback:function(){},cancelCallback:function(){},onload:function(){},type:"normal",width:"",height:"auto",zIndex:global.Config.popup.zIndex,show:!0,top:!1,resize:global.Config.popup.resize,minimize:global.Config.popup.minimize,sizingType:"normal",close:!0,overtime:8e3,delay:1e3,appendTarget:document.body,onovertime:function(){}},i=function(a){a=a||{};var b;for(var c in a)if(a.hasOwnProperty(c)){switch(b="",c){case"title":case"sizingType":case"type":b="string";break;case"content":b="object|string";break;case"timeout":case"overtime":b="number";break;case"callback":case"cancelCallback":case"onload":case"onovertime":b="function";break;case"width":case"height":case"zIndex":b="string|number";break;case"resize":case"minimize":case"top":case"close":case"show":b="boolean";break;case"appendTarget":b="object"}b&&-1!=b.indexOf(typeof a[c])&&(h[c]=a[c])}},j=function(a){var b,c={popup:"bs_pop"},d={popup:"",content:"Cnt",head:"Hd",body:"Body",title:"Tl",status:"Status",close:"Close",maximi:"Maximi",mini:"Mini",okBtn:"OkBtn",cancelBtn:"CancelBtn",foot:"Foot",resizeL:"resizeL",resizeB:"resizeB",resizeR:"resizeR",resizeRb:"resizeRb",resizeLb:"resizeLb",resizeArea:"resizeArea"},e=function(a){switch(a){case"confirm":return['<div class="bs_pop_hd" id="'+d.head+'">','<h3 class="h_tl" id="'+d.title+'"></h3>','<div class="h_ctrl">','<a href="javascript:;" class="mini" id="'+d.mini+'">mini</a>','<a href="javascript:;" class="maximi" id="'+d.maximi+'">maximi</a>','<a href="javascript:;" class="close" id="'+d.close+'">CLOSE</a>',"</div>","</div>",'<div class="bs_pop_resize">','<i class="bs_pop_resize_l" id="'+d.resizeL+'"></i>','<i class="bs_pop_resize_b" id="'+d.resizeB+'"></i>','<i class="bs_pop_resize_r" id="'+d.resizeR+'"></i>','<i class="bs_pop_resize_lb" id="'+d.resizeLb+'"></i>','<i class="bs_pop_resize_rb" id="'+d.resizeRb+'"></i>','<div class="bs_pop_bd" id="'+d.body+'">','<div class="bs_pop_bd_cnt" id="'+d.content+'"></div>',"</div>",'<div class="bs_pop_ft" id="'+d.foot+'">','<a href="javascript:;" class="bs_btn_s01 bs_btn_small" id="'+d.okBtn+'"><span>确定</span></a>','<a href="javascript:;" class="bs_btn_s03 bs_btn_small" id="'+d.cancelBtn+'"><span>取消</span></a>',"</div>","</div>",'<div class="bs_pop_resize_area" id="'+d.resizeArea+'" style="display:none;"></div>','<iframe class="bs_pop_if" frameborder="0"></iframe>'].join("");case"loading":return['<div class="bs_loading_icon"></div>','<a href="javascript:;" class="close" id="'+d.close+'">CLOSE</a>','<div class="bs_pop_bd" id="'+d.content+'"></div>','<iframe class="bs_pop_if" frameborder="0"></iframe>'].join("");case"normal":case"alert":return['<div class="bs_pop_hd" id="'+d.head+'">','<h3 class="h_tl" id="'+d.title+'"></h3>','<div class="h_ctrl">','<a href="javascript:;" class="mini" id="'+d.mini+'">mini</a>','<a href="javascript:;" class="maximi" id="'+d.maximi+'">maximi</a>','<a href="javascript:;" class="close" id="'+d.close+'">CLOSE</a>',"</div>","</div>",'<div class="bs_pop_resize">','<i class="bs_pop_resize_l" id="'+d.resizeL+'"></i>','<i class="bs_pop_resize_b" id="'+d.resizeB+'"></i>','<i class="bs_pop_resize_r" id="'+d.resizeR+'"></i>','<i class="bs_pop_resize_lb" id="'+d.resizeLb+'"></i>','<i class="bs_pop_resize_rb" id="'+d.resizeRb+'"></i>','<div class="bs_pop_bd" id="'+d.body+'">','<div class="bs_pop_status" id="'+d.status+'"></div>','<div class="bs_pop_bd_cnt" id="'+d.content+'"></div>',"</div>","</div>",'<div class="bs_pop_resize_area" id="'+d.resizeArea+'" style="display:none;"></div>','<iframe class="bs_pop_if" frameborder="0"></iframe>'].join("");case"error":case"success":return['<div class="bs_pop_hd" id="'+d.head+'">','<h3 class="h_tl" id="'+d.title+'"></h3>','<div class="h_ctrl">','<a href="javascript:;" class="mini" id="'+d.mini+'">mini</a>','<a href="javascript:;" class="maximi" id="'+d.maximi+'">maximi</a>','<a href="javascript:;" class="close" id="'+d.close+'">CLOSE</a>',"</div>","</div>",'<div class="bs_pop_resize">','<i class="bs_pop_resize_l" id="'+d.resizeL+'"></i>','<i class="bs_pop_resize_b" id="'+d.resizeB+'"></i>','<i class="bs_pop_resize_r" id="'+d.resizeR+'"></i>','<i class="bs_pop_resize_lb" id="'+d.resizeLb+'"></i>','<i class="bs_pop_resize_rb" id="'+d.resizeRb+'"></i>','<div class="bs_pop_bd" id="'+d.body+'">','<div class="bs_pop_status" id="'+d.status+'"></div>','<div class="bs_pop_bd_cnt" id="'+d.content+'"></div>',"</div>",'<div class="bs_pop_ft" id="'+d.foot+'">','<a href="javascript:;" class="bs_btn_s03 bs_btn_small" mod-init="true" id="'+d.okBtn+'"><span>确定</span></a>',"</div>","</div>",'<div class="bs_pop_resize_area" id="'+d.resizeArea+'" style="display:none;"></div>','<iframe class="bs_pop_if" frameborder="0"></iframe>'].join("");default:return['<div class="bs_pop_hd" id="'+d.head+'">','<h3 class="h_tl" id="'+d.title+'"></h3>','<div class="h_ctrl">','<a href="javascript:;" class="mini" id="'+d.mini+'">mini</a>','<a href="javascript:;" class="maximi" id="'+d.maximi+'">maximi</a>','<a href="javascript:;" class="close" id="'+d.close+'">CLOSE</a>',"</div>","</div>",'<div class="bs_pop_resize">','<i class="bs_pop_resize_l" id="'+d.resizeL+'"></i>','<i class="bs_pop_resize_b" id="'+d.resizeB+'"></i>','<i class="bs_pop_resize_r" id="'+d.resizeR+'"></i>','<i class="bs_pop_resize_lb" id="'+d.resizeLb+'"></i>','<i class="bs_pop_resize_rb" id="'+d.resizeRb+'"></i>','<div class="bs_pop_bd" id="'+d.body+'">','<div class="bs_pop_status" id="'+d.status+'"></div>','<div class="bs_pop_bd_cnt" id="'+d.content+'"></div>',"</div>","</div>",'<div class="bs_pop_resize_area" id="'+d.resizeArea+'" style="display:none;"></div>','<iframe class="bs_pop_if" frameborder="0"></iframe>'].join("")}},f="bsPop";switch(a){case"confirm":f+="Confirm";break;case"loading":f+="Loading",c.popup+=" bs_pop_loading";break;case"error":f+="Status",c.popup+=" bs_pop_error";break;case"success":f+="Status",c.popup+=" bs_pop_success";break;case"normal":case"alert":f+="Normal";break;default:f=a}for(b in d)d.hasOwnProperty(b)&&(d[b]=f+d[b]);return{className:c,id:d,html:e(a)}},k=function(){if(0!==c.queue.length&&(c.queue[c.queue.length-1]!==d||d.style.zIndex!==c.queue.maxZ)){var a,b,e;for(b=c.queue.indexOf(d),-1!=b&&c.queue.splice(b,1),c.queue.push(d),b=0,e=c.queue.length;e>b;b++)a=c.queue[b],a.style.zIndex=a.isTop?h.zIndex+10*(b+c.queue.length):h.zIndex+10*b,b===e-1&&(c.queue.maxZ=a.style.zIndex)}},l=function(a,b){a=a||window.event;var c=d.srcResizeArea,e=!1,f=!1,g=!1,h=0,i=0;if(c){switch("undefined"==typeof c.borderColWidth&&(c.borderColWidth=(parseInt($(d).css("border-left-width"),10)||0)+(parseInt($(d).css("border-top-width"),10)||0),c.borderRowWidth=(parseInt($(d).css("border-top-width"),10)||0)+(parseInt($(d).css("border-bottom-width"),10)||0)),h=parseInt(d.style.width,10),i=d.offsetHeight-c.borderRowWidth,c.style.display="",c.style.width=h+"px",c.style.height=i+"px",c.style.left=c.style.right=c.style.top=c.style.bottom="auto",c.posX=a.clientX,c.posY=a.clientY,b){case"left":c.style.right=c.style.top=0,c.style.cursor="w-resize",e=!0,g=!0;break;case"left-bottom":c.style.right=c.style.top=0,c.style.cursor="sw-resize",e=f=!0,g=!0;break;case"right-bottom":c.style.left=c.style.top=0,c.style.cursor="se-resize",e=f=!0;break;case"right":c.style.left=c.style.top=0,c.style.cursor="e-resize",e=!0;break;case"bottom":c.style.left=c.style.top=0,c.style.cursor="s-resize",f=!0}document.onmousemove=function(a){a=a||window.event;var b=h+(g?c.posX-a.clientX:a.clientX-c.posX),d=i+a.clientY-c.posY;180>b&&(b=180),100>d&&(d=100),b>document.documentElement.clientWidth-c.borderColWidth&&(b=document.documentElement.clientWidth-c.borderColWidth),d>document.documentElement.clientHeight-c.borderRowWidth&&(d=document.documentElement.clientHeight-c.borderRowWidth),e&&(c.style.width=b+"px"),f&&(c.style.height=d+"px"),window.getSelection&&window.getSelection().removeAllRanges(),document.selection&&document.selection.empty(),a.preventDefault&&a.preventDefault(),a.returnValue=!1},window.onblur=window.onlosecapture=document.onmouseup=function(){e&&(d.style.width=c.style.width),f&&d.srcBody&&(d.srcBody.style.height=c.offsetHeight-(d.offsetHeight-d.srcBody.offsetHeight)+"px"),c.style.display="none",d.fixed(),window.onblur=window.onlosecapture=document.onmouseup=document.onmousemove=null}}},m=1==arguments.length?a:b;if(clearTimeout(c.readyKey),"string"==typeof m?h.content=m:"object"==typeof m&&i(m),2==arguments.length&&"string"==typeof a&&(h.type=a),f=j(h.type),d=$("#"+f.id.popup)[0],!d){switch(d=g.createElement("div"),d.className=f.className.popup,d.id=f.id.popup,d.innerHTML=f.html,d.posX=d.posY=0,d.myLeft=d.myTop=NaN,d.hide=function(a){var b=this;clearTimeout(b.timeoutKey),$(b).removeClass("bs_pop_cur"),d.myLeft=d.myTop=NaN,document.onmousemove=document.onmouseup=document.onselectstart=null,b.srcBg&&b.srcBg.hide(),b.srcHideCallback&&b.srcHideCallback(a)},d.fixed=function(){"max"==d.sizingType&&(d.style.width=d.style.width=document.documentElement.clientWidth-(d.offsetWidth-d.srcHead.offsetWidth)+"px",d.srcBody&&(d.srcBody.style.height=document.documentElement.clientHeight-(d.offsetHeight-d.srcBody.offsetHeight)+"px"));var a=window.Config.page.reset?0:UA.ie&&UA.ie<=6?c.myScroll.scrollTop:0,b=window.Config.page.reset?0:UA.ie&&UA.ie<=6?c.myScroll.scrollLeft:0,e=b,f=b+document.documentElement.clientWidth-d.offsetWidth,g=a,h=a+document.documentElement.clientHeight-d.offsetHeight,i=isNaN(d.myLeft)?b+(document.documentElement.clientWidth-d.offsetWidth)/2:b+d.myLeft,j=isNaN(d.myTop)?a+(document.documentElement.clientHeight-d.offsetHeight)/2:a+d.myTop;i>f&&(i=f),e>i&&(i=e),j>h&&(j=h),g>j&&(j=g),d.style.left=i+"px",d.style.top=j+"px"},d.sizingChange=function(a){switch(a){case"max":if($(d.srcMaximi).removeClass("maximi").addClass("reduce"),!document.documentElement.clientWidth)break;d.style.width=d.style.width=document.documentElement.clientWidth-2+"px",d.srcBody&&(d.srcBody.style.height=document.documentElement.clientHeight-d.srcHead.offsetHeight-2-(d.srcFoot?d.srcFoot.offsetHeight:0)+"px"),d.myLeft=d.myTop=NaN,d.sizingType="max";break;case"mini":break;case"reduce":$(d.srcMaximi).removeClass("reduce").addClass("maximi"),d.style.width=isNaN(h.width)||""===h.width?h.width:h.width+"px",d.srcBody&&(d.srcBody.style.height=isNaN(h.height)||""===h.height?h.height:h.height+"px"),d.myLeft=d.myTop=NaN,d.sizingType="reduce"}c.TransKey&&(d.style[c.TransKey]="none"),d.fixed(),c.TransKey&&(d.style[c.TransKey]="")},"loading"==h.type?(d.srcDelay=h.mustConfirm?0:h.delay,d.srcOvertime=h.overtime,d.srcOnovertime=h.onovertime,d.show=function(){var a=this;clearTimeout(a.timeoutKey),a.timeoutKey=setTimeout(function(){a.srcBg&&a.srcBg.show(),$(a).addClass("bs_pop_cur"),a.fixed(),a.offsetHeight&&a.focus(),a.srcOvertime&&(clearTimeout(a.overtimeKey),a.overtimeKey=setTimeout(function(){a.srcOnovertime()},a.srcOvertime)),setTimeout(function(){k()},10),a.srcShowCallback&&a.srcShowCallback()},d.srcDelay)}):d.show=function(){var a=this;switch(a.srcBg&&a.srcBg.show(),h.appendTarget.appendChild(a),$(a).addClass("bs_pop_cur"),a.offsetHeight&&a.focus(),a.fixed(),clearTimeout(this.aniKey),k(),this.aniKey=setTimeout(function(){"confirm"==h.type?d.srcOkBtn.focus():d.srcClose.offsetHeight&&d.srcClose.focus(),k()},200),h.sizingType){case"max":a.sizingChange("max");break;case"normal":a.sizingChange("reduce");break;default:a.sizingChange("reduce")}a.srcShowCallback&&a.srcShowCallback()},h.appendTarget.appendChild(d),d.srcClose=$("#"+f.id.close)[0],d.srcMaximi=$("#"+f.id.maximi)[0],d.srcMini=$("#"+f.id.mini)[0],d.srcTitle=$("#"+f.id.title)[0],d.srcContent=$("#"+f.id.content)[0],d.srcHead=$("#"+f.id.head)[0],d.srcBody=$("#"+f.id.body)[0],d.srcFoot=$("#"+f.id.foot)[0],d.srcResizeL=$("#"+f.id.resizeL)[0],d.srcResizeR=$("#"+f.id.resizeR)[0],d.srcResizeB=$("#"+f.id.resizeB)[0],d.srcResizeLb=$("#"+f.id.resizeLb)[0],d.srcResizeRb=$("#"+f.id.resizeRb)[0],d.srcResizeArea=$("#"+f.id.resizeArea)[0],d.srcDelay=h.delay,d.type=h.type,$(d.srcClose).bind("click",function(a){d.hide(),stopBubble(a)}),$(d.srcMaximi).bind("click",function(a){-1!=d.srcMaximi.className.indexOf("maximi")?d.sizingChange("max"):d.sizingChange("reduce"),stopBubble(a)}),$(d.srcMini).bind("click",function(a){$(d.srcClose).trigger("click")}),$(d.srcClose).bind("keydown",function(a){a=a||window.event,(27==a.keyCode||32==a.keyCode)&&d.hide()}),$(d.srcHead).bind("mousedown",function(a){a=a||window.event,c.TransKey&&(d.style[c.TransKey]="none"),d.posX=a.clientX-(parseFloat(d.style.left)||0),d.posY=a.clientY-(parseFloat(d.style.top)||0),document.onselectstart=function(){return!1},document.onmousemove=function(a){a=a||window.event;var b=a.clientX-d.posX,e=a.clientY-d.posY,f=UA.ie&&UA.ie<=6?c.myScroll.scrollTop:0,g=UA.ie&&UA.ie<=6?c.myScroll.scrollLeft:0;return d.myLeft=b-g,d.myTop=e-f,d.fixed(),window.getSelection&&window.getSelection().removeAllRanges(),document.selection&&document.selection.empty(),a.preventDefault&&a.preventDefault(),a.returnValue=!1,!1},window.onblur=window.onlosecapture=document.onmouseup=function(){return c.TransKey&&(d.style[c.TransKey]=""),document.onmousemove=document.onmouseup=document.onselectstart=null,!1},k(),a.preventDefault&&a.preventDefault(),a.returnValue=!1}),$(d.srcBody).bind("scroll",function(){$(window).trigger("scroll")}),$(d.srcResizeL).bind("mousedown",function(a){l(a,"left")}),$(d.srcResizeR).bind("mousedown",function(a){l(a,"right")}),$(d.srcResizeB).bind("mousedown",function(a){l(a,"bottom")}),$(d.srcResizeLb).bind("mousedown",function(a){l(a,"left-bottom")}),$(d.srcResizeRb).bind("mousedown",function(a){l(a,"right-bottom")}),$(window).bind("resize",d.fixed),UA.ie&&UA.ie<=6&&$(window).bind("scroll",d.fixed),h.type){case"confirm":d.srcOkBtn=$("#"+f.id.okBtn)[0],d.srcCancelBtn=$("#"+f.id.cancelBtn)[0],$(d.srcCancelBtn).bind("keydown",function(a){9==a.keyCode&&(a.preventDefault&&a.preventDefault(),a.returnValue=!1,d.srcOkBtn.focus())}),d.srcOkBtn.onkeydown=function(a){a=a||window.event,(27==a.keyCode||32==a.keyCode)&&d.hide()},d.srcOkBtn.onclick=function(){d.hide(!0)},d.srcCancelBtn.onclick=function(){d.hide()};break;case"loading":break;case"normal":break;case"success":case"error":d.srcOkBtn=$("#"+f.id.okBtn)[0],d.srcOkBtn.onclick=function(){d.hide()}}c.queue.push(d)}switch(/normal|alert|error|success/g.test(a)&&h.timeout&&(h.minimize=!1,h.resize=!1),!h.close&&d.srcClose&&(d.srcClose.style.display="none"),!h.resize&&d.srcMaximi&&(d.srcMaximi.style.display="none"),!h.minimize&&d.srcMini&&(d.srcMini.style.display="none"),h.type){case"confirm":d.srcShowCallback=function(){var a=this;a.srcOkBtn.focus(),h.onload.call(a)},d.srcHideCallback=function(a){var b=this;a?h.callback.call(b):h.cancelCallback.call(b)};break;case"loading":d.srcDelay=h.mustConfirm?0:1e3,d.srcOvertime=h.overtime,d.srcOnovertime=h.onovertime,d.srcShowCallback=function(){var a=this;clearTimeout(a.timeoutKey),a.timeoutKey=setTimeout(function(){g.body.appendChild(a),a.style.marginLeft=-a.offsetWidth/2+"px",a.style.marginTop=-a.offsetHeight/2+"px",$(a).addClass("bs_pop_cur"),a.srcOvertime&&(clearTimeout(a.overtimeKey),a.overtimeKey=setTimeout(function(){a.srcOnovertime()},a.srcOvertime)),h.onload&&h.onload.call(a)},a.srcDelay)};break;case"normal":case"error":case"success":d.srcShowCallback=function(){var a=this;h.onload.call(a),clearTimeout(a.timeoutKey),h.timeout>0&&(a.timeoutKey=setTimeout(function(){a.hide()},h.timeout))},d.srcHideCallback=function(){var a=this;h.callback.call(a)};break;default:d.srcShowCallback=function(){var a=this;h.onload.call(a)},d.srcHideCallback=function(){var a=this;h.callback.call(a)}}return h.mustConfirm&&(e=$("#bsPopBg")[0],e||(e=g.createElement("div"),e.className="bs_pop_bg",e.id="popupBg",e.show=function(){this.style.visibility="visible"},e.hide=function(){this.style.visibility="hidden"},e.onclick=function(){var a=this;clearTimeout(this.timeoutKey),$(this.srcPopup).addClass("bs_pop_animate"),this.timeoutKey=setTimeout(function(){$(a.srcPopup).removeClass("bs_pop_animate")},1e3)},g.body.appendChild(e))),d.srcTitle&&(d.srcTitle.innerHTML=h.title,d.srcTitle.style.display=""===h.title?"none":""),d.className=f.className.popup,d.isTop=h.top,d.style.width=isNaN(h.width)||""===h.width?h.width:h.width+"px",d.srcBody&&(d.srcBody.style.height=isNaN(h.height)||""===h.height?h.height:h.height+"px"),d.style.zIndex=h.zIndex,"object"==typeof h.content&&1==h.content.nodeType||"string"==typeof h.content&&/^[a-z\.#]/gi.test(h.content)&&$(h.content).length>0?($(h.content).show(),$(d.srcContent).append($(h.content))):d.srcContent.innerHTML=h.content,h.resize?$(d.srcResizeL).parent().removeClass("bs_pop_resize_disable"):$(d.srcResizeL).parent().addClass("bs_pop_resize_disable"),h.show&&d.show(),d}function makeFunction(a,b){if(/function|object/.test(typeof a)||"function"!=b&&"object"!=b&&"reg"!=b&&"string"==typeof a)return function(){return a}();var c;try{c=new Function("try{return "+a+"} catch(er){return undefined}")}catch(d){c=function(){}}return"function"==b?c:c()}function isNaNFn(a){return"function"==typeof a?"function(){}"===a.toString().replace(" ",""):!0}function getPosition(a,b){b=b||window;for(var c=(document,a),d=a.getBoundingClientRect(),e=c.offsetLeft,f=c.offsetTop;c.offsetParent;)c=c.offsetParent,e+=c.offsetLeft,f+=c.offsetTop;return{left:e,top:f,right:document.body.scrollLeft+d.right,bottom:document.body.scrollTop+d.bottom}}function attr2mod(a){return"mod-"+a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})}function isBelong(a,b){for(var c=b;c;c=c.parentNode)if(c===a)return!0}function leafRebuild(a,b,c,d){var e={leafCount:5,classes:{prev:"prev",prevDisable:"prev_disable",ellipiss:"s",number:"number",numberCurrent:"current",next:"next",nextDisable:"next_disable",jump:"jumpto"}};if(a=Number(a),b=Number(b),c=Number(c),0===b)return"";var f="",g=e.leafCount,h=Math.floor(g/2),i=Math.ceil(c/b)-1,j=a-h>0?a-h:0,k=i>a+h?a+h:i,l="string"==typeof d?function(a){return 0>a?a=0:"",a>i?a=i:"","javascript:"+d+"("+a+");"}:function(a){return 0>a?a=0:"",a>i?a=i:"",d.href+(Number(a)+Number(d.devi||0))},m="string"==typeof d?"this.parentNode.children[0].value &&"+d+"(Number(this.parentNode.children[0].value) - 1)":"this.parentNode.children[0].value && (window.location.href=\\'"+d.href+"\\' + Number(this.parentNode.children[0].value) + "+Number(d.devi||0)+")";if(isNaN(a)||isNaN(b)||isNaN(c))return"";k>i?k=i:"",g>k-j?i>=j+g-1?k=j+g-1:k-g+1>=0?j=k-g+1:"":"",j!=k&&(f+='<a href="'+(0===a?"javascript:;":l(a-1))+'" class="'+e.classes.prev+(0===a?" "+e.classes.prevDisable:"")+'">&laquo;上一页</a>'),0!==j&&(f+='<a href="'+l(0)+'" class="'+e.classes.number+'">1</a>'),a>h&&0!==j&&1!=j&&(f+='<span class="'+e.classes.ellipiss+'">…</span>');for(var n=j;k>=n&&j!=k;n++)f+='<a class="'+e.classes.number+" "+(n==a?e.classes.numberCurrent:"")+'" href="'+(n==a?"javascript:;":l(n))+'">'+(n+1)+"</a>";return i-h-1>a&&k!=i&&(f+='<span class="'+e.classes.ellipiss+'">…</span>'),k!=i&&(f+='<a href="'+l(i)+'" class="'+e.classes.number+'">'+(i+1)+"</a>"),j!=k&&(f+='<a href="'+(a==i?"javascript:;":l(a+1))+'" class="'+e.classes.next+" "+(a==i?" "+e.classes.nextDisable:"")+'">下一页&raquo;</a>'),i>1&&(f+='<span class="'+e.classes.jump+'">跳转到第 <input type="text" class="ipt" onblur="isNaN(this.value) || Number(this.value) <= 0 ?this.value=1:(Number(this.value) > '+(i+1)+"?this.value="+(i+1)+':\'\')" /> 页 <input type="button" class="btn" onclick="'+m+'" value="GO" /></span>'),f}function urlRender(a){var b=a.replace(/\{\{[^\}]*\}\}/g,function(a){var b=a.replace(/^\{\{\s*/g,"").replace(/\s*\}\}$/,"");return $(b).val()});return b}function modAssignment(a,b){if(!a)return{};b=b||{};var c,d=clone(a)||{},e=1==b.nodeType;for(var f in d)if(d.hasOwnProperty(f)){if(c=e?$(b).attr(attr2mod(f)):b[f],"undefined"==typeof c||""===c)continue;switch(typeof d[f]){case"number":!isNaN(c)&&(d[f]=Number(c));break;case"string":d[f]=c;break;case"function":d[f]=makeFunction(c,"function")||d[f];break;case"object":d[f].splice===Array.prototype.splice||"{}"==JSON.stringify(d[f])?d[f]=makeFunction(c,"object"):d[f]=modAssignment(d[f],makeFunction(c,"object"));break;case"boolean":"boolean"==typeof c&&(d[f]=c),"string"==typeof c&&(d[f]="true"==c?!0:!1);break;case"undefined":d[f]=makeFunction(c)}}return clone(d)}function getObjByKey(a,b){if(a&&b){for(var c=b.split("."),d=a,e=0,f=c.length;f>e&&null!==d;e++){if("object"!=typeof d){d=undefined;break}if(!(c[e]in d))break;d=d[c[e]]}return d===a?undefined:d}}function moduleBuild(){}function pageInit(){var a,b,c,d,e=document.getElementsByTagName("html")[0],f=global.Config.mainPage;if(-1!=e.className.indexOf("bs_outhtml")){$("#switch").bind("click",function(){$("#bodyArea").toggleClass("bs_fullscreen")}),request.hash("url")&&(f=decodeURIComponent(request.hash("url"))),$(".bs_menu a").each(function(){this.target=this.target||"mainframe",!f&&"mainframe"==this.target&&!/^javascript:/g.test(this.href)&&(f=this.href)});var g=mod.nav.get("end").url||f;return void $("#main").html('<iframe class="bs_main_if" name="mainframe" id="mainframe" src="'+g+'" width="100%" height="100%" frameborder="0" scrolling="no"></iframe>')}-1==e.className.indexOf("bs_inset_html")&&(document.onreadystatechange=function(){if("complete"==document.readyState){$(e).addClass("bs_inset_html");var f=document.createElement("div"),g=document.createElement("div");for(f.className="bs_inset_frame",g.className="bs_inset_bodyarea",d=[],c=0,b=document.body.childNodes.length;b>c;c++)a=document.body.childNodes[c],(!(1==a.nodeType&&"SCRIPT"==a.tagName)||/bs_pop/g.test(a.className))&&d.push(a);for(document.body.appendChild(f),f.appendChild(g),c=0,b=d.length;b>c;c++)g.appendChild(d[c]);document.onreadystatechange=null,$(".bs_tablebox ").each(function(){this.parentNode.resize&&this.parentNode.resize()})}});try{parent!=window.self&&mod.nav.set(window.location.href,document.title)}catch(h){}}if(!global.mod){String.prototype.trim=function(){return this.replace(/^(\s|\u3000)*|(\s|\u3000)*$/g,"")},String.prototype.getBytes=function(){for(var a=0,b=0;b<this.length;b++)a+=this.charCodeAt(b)>256?2:1;return a},Array.prototype.indexOf=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},Array.prototype.remove=Array.prototype.remove||function(a){for(var b=0,c=this.length;c>b;)this[b]===a?this.splice(b,1):b++};var UA=global.UA={ie:window.ActiveXObject&&/msie (\d*)/i.test(navigator.userAgent)?RegExp.$1:!1},request=global.request={search:function(a){var b=location.search.replace(/[? ]/g,"");if(""===b)return null;for(var c=b.split("&"),d=0,e=c.length;e>d;d++){var f=c[d].split("=");if(!(f.length<=1)){var g=f[0],h=f[1];if(g===a)return h}}return null},hash:function(a,b){var c=location.hash.replace(/[# ]/g,"").replace(/^[#]*&/g,""),d="undefined"!=typeof b,e=!1;if(""===c&&!d)return null;for(var f=c.split("&"),g=0,h=f.length;h>g;g++){var i=f[g].split("=");if(!(i.length<=1)){var j=i[0],k=i[1];if(j===a){if(!d)return k;f[g]=j+"="+b,e=!0}}}return!e&&f.push(a+"="+b),d?(window.location.hash=f.join("&"),f.join("&")):null}},historyManage=global.historyManage=UA.ie&&UA.ie<8?{init:function(a,b){if(this.ifElement=document.getElementById("modHistoryManage"),!this.ifElement){this.ifElement=document.createElement("iframe"),this.ifElement.id="modHistoryManage",this.ifElement.style.cssText=["position:absolute","top:-500px","left:-500px","broder:0","overflow:hidden","width:0","height:0"].join(";"),document.body.appendChild(this.ifElement);try{this.ifDocument=this.ifElement.contentWindow.document}catch(c){}}"function"==typeof a&&(!this.callback&&(this.callback={}),!b&&(b=(new Date).getTime()),this.callback[b]=a,this.hashChangeCallback=function(){for(var a in this.callback)this.callback.hasOwnProperty(a)&&this.callback[a]()})},add:function(a,b){try{this.ifDocument.open(),this.ifDocument.write(["<!DOCTYPE HTML>","<html>","<head>",'<script type="text/javascript">',"function onloadEvent(){",'parent.request.hash("'+a+'","'+b+'");',"parent.historyManage.hashChangeCallback();","};","</script>","</head>",'<body onload="onloadEvent();">','<input type="value" value="'+window.location.hash.replace("#","")+'" id="'+window.location.hash.replace("#","")+'" />',"</body>","</html>"].join("")),this.ifDocument.close()}catch(c){}}}:{init:function(a,b){!this.callback&&(this.callback={}),!b&&(b=(new Date).getTime()),this.callback[b]=a,this.hashChangeCallback=function(){for(var a in this.callback)this.callback.hasOwnProperty(a)&&this.callback[a]()},window.onhashchange=this.hashChangeCallback},add:function(a,b){request.hash(a,b)}},console=global.console||{log:function(a){}},cookies=global.cookies={get:function(a){var b=document.cookie.match(new RegExp("(^| )"+a+"=([^;]*)(;|$)"));return null!==b?window.unescape(b[2]):null},set:function(a,b,c,d,e,f){c||(c=24);var g=new Date;g.setTime(g.getTime()+60*c*60*1e3),document.cookie=a+"="+window.escape(b)+";expires="+g.toGMTString()+(e?";domain="+e:"")+(d?";path="+d:"")+(f===!0?";secure":"")},del:function(a){var b=new Date;b.setTime(b.getTime()-1);var c=this.get(a);null!==c&&(document.cookie=a+"="+c+";expires="+b.toGMTString())}},flash=global.flash={init:function(a,b){var c={wmode:"opaque",width:300,height:300,flashvars:"",flashUrl:""};if("object"==typeof b){if("undefined"!=typeof b.wmode){switch(b.wmode.toLowerCase()){case"opaque":c.wmode="opaque";break;case"window":c.wmode="window";break;case"transparent":c.wmode="transparent"}c.wmode=b.wmode}"undefined"!=typeof b.width?c.width=b.width:"","undefined"!=typeof b.height?c.height=b.height:"","undefined"!=typeof b.flashvars?c.flashvars=b.flashvars:"","undefined"!=typeof b.flashUrl?c.flashUrl=b.flashUrl:""}if(""!==c.flashUrl){var d=['<object id="object_'+a+'" name="'+a+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10.0.32" width="'+c.width+'" height="'+c.height+'">','<param name="movie" value="'+c.flashUrl+'" />','<param name="flashvars" value="'+c.flashvars+'" />','<param name="quality" value="high" />','<param name="allowscriptaccess" value="always" />','<param name="wmode" value="'+c.wmode+'"/>','<embed id="embed_'+a+'" src="'+c.flashUrl+'" width="'+c.width+'"  height="'+c.height+'" allowscriptaccess="always" quality="high" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+c.flashvars+'" type="application/x-shockwave-flash" wmode="'+c.wmode+'"></embed>',"</object>"].join("");return d}},write:function(a,b){var c=this.init(a,b);c&&document.write(c)},add:function(a,b,c){var d=this.init(b,c);a&&d&&(a.innerHTML=d)},ctrl:function(a){var b=document,c=b.getElementById("embed_"+a),d=b.getElementById("object_"+a);if(-1==navigator.appName.indexOf("Microsoft")){if(!c)return;return c}if(d)return d}},JSON=global.JSON=function(){function f(a){return 10>a?"0"+a:a}function stringify(a,b){var c,d,e,f,g,h=/["\\\x00-\x1f\x7f-\x9f]/g;switch(typeof a){case"string":return h.test(a)?'"'+a.replace(h,function(a){var b=m[a];return b?b:(b=a.charCodeAt(),"\\u00"+Math.floor(b/16).toString(16)+(b%16).toString(16))})+'"':'"'+a+'"';case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if("function"==typeof a.toJSON)return stringify(a.toJSON());if(c=[],"number"==typeof a.length&&!a.propertyIsEnumerable("length")){for(f=a.length,d=0;f>d;d+=1)c.push(stringify(a[d],b)||"null");return"["+c.join(",")+"]"}if(b)for(f=b.length,d=0;f>d;d+=1)e=b[d],"string"==typeof e&&(g=stringify(a[e],b),g&&c.push(stringify(e)+":"+g));else for(e in a)"string"==typeof e&&(g=stringify(a[e],b),g&&c.push(stringify(e)+":"+g));return"{"+c.join(",")+"}"}}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return{stringify:stringify,parse:function(text,filter){function walk(a,b){var c,d;if(b&&"object"==typeof b)for(c in b)Object.prototype.hasOwnProperty.apply(b,[c])&&(d=walk(c,b[c]),d!==undefined?b[c]=d:delete b[c]);return filter(a,b)}var j;if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof filter?walk("",j):j;throw new SyntaxError("parseJSON")}}}(),tplParse=global.tplParse=function(a,b){if(!b)return"";var c=function(b){return b.replace(/\$\w+/g,function(b){var c=b.replace("$",""),d=a[c]||"";return"number"==typeof d?d:'"'+d.replace(/["]/g,'\\"').replace(/\r/g,"").replace(/\n/g,"")+'"'}).replace(/return\s".+?";/g,function(a){return['return "',a.replace(/^return\s"/g,"").replace(/";$/g,"").replace(/[^\\]"/g,function(a){return a.substr(0,1)+'\\"'}),'";'].join("")})};return b.replace(/[{]\$[^{}]*\}/g,function(b){var c=b.replace("{$","").replace("}",""),d=a[c]||"";return d}).replace(/\{js::[^{}]*\}/g,function(a){var b=a.replace("{js::","").replace("}","");try{return new Function("try{return "+c(b)+';}catch(er){return "";}')()}catch(d){return""}}).replace(/\{if.+?\{\/if\}/g,function(a){var b=a.replace(/\{if\s[^{}]*\}/g,function(a){return"if("+a.replace("{if ","").replace("}","")+"){"}).replace(/\{else\sif\s[^{}]*\}/g,function(a){return"}else if("+a.replace("{else if","").replace("}","")+"){"}).replace(/\{else[^{}]*\}/g,function(a){return"}else{"}).replace(/\{\/if\}/g,function(a){return"}"}).replace(/\)\{[^{}]*\}/g,function(a){var b=a.substr(0,a.indexOf("{"));return b+'{return "'+a.substr(a.indexOf("{")).replace("{","").replace("}","").replace(/"/g,'\\"')+'";}'}).replace(/\}else\{[^{}]*\}/g,function(a){var b=a.substr(0,a.indexOf("{"));return b+'{return "'+a.substr(a.indexOf("{")).replace("{","").replace("}","").replace(/"/g,'\\"')+'";}'});try{return new Function(c(b))()||""}catch(d){return""}})};moduleBuild.prototype={box:function(a,b){var c=a?$(a):$(".bs_mod01"),d={title:"",titleLeft:"",titleRight:"",hide:!1};d=modAssignment(d,b),c.each(function(){var a=this,b=modAssignment(d,a);if(!isEqual(a.opAttr,b)){$(a).addClass("bs_mod01");for(var c=document.createDocumentFragment();a.childNodes.length>0;)c.appendChild(a.childNodes[0]);$(a).html(['<div class="bs_mod01_hd">',b.title?'<h3 class="h_tl"><i class="bs_toggle_icon '+(b.hide?"bs_toggle_icon_cur":"")+'"></i>'+b.title+"</h3>":"",b.titleLeft?'<div class="h_l">'+b.titleLeft+"</div>":"",b.titleRight?'<div class="h_r">'+b.titleRight+"</div>":"","</div>",'<div class="bs_mod01_bd" '+(b.hide?'style="display:none;"':"")+">","</div>"].join("")),
$(a).children().eq(1).append(c),$(a).show();var e={toggleIco:$(a).children(".bs_mod01_hd").find(".bs_toggle_icon")[0],toggleCnt:$(a).children(".bs_mod01_bd")[0]},f=e.toggleIco?e.toggleIco.parentNode:null;a.show=function(){$(e.toggleIco).removeClass("bs_toggle_icon_cur"),$(e.toggleCnt).slideDown(200)},a.hide=function(){$(e.toggleIco).addClass("bs_toggle_icon_cur"),$(e.toggleCnt).slideUp(200)},f&&(f.onclick=function(){-1==e.toggleIco.className.indexOf("bs_toggle_icon_cur")?a.hide():a.show()}),a.opAttr=b,f=null}})},tab:function(a,b){var c=a?$(a):$(".bs_tab"),d={title:"",titleLeft:"",titleRight:"",index:0,onchange:function(){},autoPlay:!1,timeout:2e3,hide:!1};return d=modAssignment(d,b),c.each(function(){var b=this,c=modAssignment(d,b);if(!isEqual(b.opAttr,c)){var e=$(b).children("ul")[0],f=document.createDocumentFragment();$(a).addClass("bs_tab"),$(e).find("a").each(function(a){var b=this,c=$(b).attr("href").split("#").pop(),d=$("#"+c)[0];d&&f.appendChild(d)}),f.appendChild(e),b.innerHTML=['<div class="bs_tab_hd">',c.title?'<h3 class="h_tl"><i class="bs_toggle_icon '+(c.hide?"bs_toggle_icon_cur":"")+'"></i>'+c.title+"</h3>":"",'<div class="bs_tab_tablist"></div>',c.titleLeft?'<div class="h_l">'+c.titleLeft+"</div>":"",c.titleRight?'<div class="h_r">'+c.titleRight+"</div>":"","</div>",'<div class="bs_tab_bd '+(c.hide?'style="display:none;"':"")+'"></div>'].join(""),$(b).children(".bs_tab_hd").children(".bs_tab_tablist").append(e),$(b).children(".bs_tab_bd").append(f).children().addClass("bs_tab_bd_item").hide(),b.style.display="block",$(b).children(".bs_tab_hd").children(".bs_tab_tablist").find("a").each(function(){var a,d,e=this,f=function(a){a=a||window.event;var d=this,e=$(d).parent().parent().children().index($(d).parent()),f=$(d).attr("href").split("#").pop();a.preventDefault&&a.preventDefault(),a.returnValue=!1,$(d).parent().addClass("cur").siblings().removeClass("cur"),$("#"+f).show().siblings().hide(),b.index=e,c.onchange&&c.onchange.call(d,e)};for(!e.clickEvents&&(e.clickEvents=[]),a=0,d=e.clickEvents.length;d>a;a++)$(e).unbind("click",e.clickEvents[a]);e.clickEvents=[],$(e).bind("click",f),e=null});var g={toggleIco:$(b).children(".bs_tab_hd").find(".bs_toggle_icon")[0],toggleCnt:$(b).children(".bs_tab_bd")[0]},h=g.toggleIco?g.toggleIco.parentNode:null;h&&(h.onclick=function(){var a=g.toggleIco,b=g.toggleCnt;-1==a.className.indexOf("bs_toggle_icon_cur")?($(a).addClass("bs_toggle_icon_cur"),$(b).slideUp(200)):($(a).removeClass("bs_toggle_icon_cur"),$(b).slideDown(200))});var i=isNaN(c.index)?0:c.index,j=$(b).children(".bs_tab_hd").children(".bs_tab_tablist").find("a");0>i&&(i=0),i>j.length&&(i=j.length),b.index=i,b.current=function(a){a%=j.length,$(j).eq(a).trigger("click")},b.prev=function(){b.current(b.index-1)},b.next=function(){b.current(b.index+1)},b.current(b.index),c.autoPlay&&c.timeout&&(!function k(){clearTimeout(b.hoverKey),clearTimeout(b.timeoutKey),b.isHover?b.hoverKey=setTimeout(k,20):(b.next(),b.timeoutKey=setTimeout(k,c.timeout))}(),$(g.toggleCnt).bind("mouseenter",function(){b.isHover=!0}),$(g.toggleCnt).bind("mouseleave",function(){b.isHover=!1})),b.opAttr=c,h=null}}),c[0]},form:function(a,b){var c=this,d=a?$(a):$(".bs_form"),e={action:"",method:"",actionType:"",target:"",search:!1,actionParam:{},targetConfig:{},actionCallback:function(){},onsubmit:function(){},onerror:function(){},submitCallback:function(){},onresponse:function(){},onload:function(){},timeout:0,messageKey:global.Config.ajax.key.message,statusKey:global.Config.ajax.key.status,successCode:global.Config.ajax.successCode,reset:!1};e=modAssignment(e,b),d.each(function(){var a,b=this,d=modAssignment(e,b),f=function(){var c,f,g,h,i,j,k=b.checkElms.length,l=[];for(c=0,f=k;f>c;c++)if(g=b.checkElms[c],g.srcBox.isOk===!0)k--;else{if(g.srcBox.isOk!==!1)return;k--,l.push(g)}if(l.length)return void d.onerror(l);for(c=0,f=b.checkElms.length;f>c;c++)if(g=b.checkElms[c],j=g.name,"INPUT"==g.tagName&&/radio|checkbox/.test(g.type))for(e.actionParam[j]=[],h=0,i=b[j].length;i>h;h++)b[j][h].checked&&e.actionParam[j].push(b[j][h].value);else if("select"==g.tagName&&g.multiple)for(e.actionParam[j]=[],h=0,i=g.options.length;i>h;h++)g.options[h].selected&&e.actionParam[j].push(g.options[h].value);else e.actionParam[j]=g.value;a(e.actionParam)},g=$(b).find("*[mod-type=submit]")[0],h=$(b).find("*[mod-type=clear]")[0];if(!isEqual(b.opAttr,d)){if($(b).addClass("bs_form"),$(b).find("table").addClass("bs_table_s0"),$(b).find("input,select,textarea").each(function(){mod.widget(this)}),!a)if(d.target&&"{}"!=JSON.stringify(d.targetConfig)){var j;d.target.splice===Array.prototype.splice?(j=[],$(d.target).each(function(){j.push(this)})):j=[d.target],d.targetConfig.splice!==Array.prototype.splice&&(d.targetConfig=[d.targetConfig]),a=function(a){!isNaNFn(d.onsubmit)&&(a=d.onsubmit(a)),a&&$(j).each(function(b){if(0!==$(this+"").length){var f,g=d.targetConfig[b];if(d.search?(f=e.reset?0:request.hash(this.replace("#","")+"Cur")||0,d.search=!1):f=0,"actionParam"in g&&"object"==typeof g.actionParam)for(var h in a)a.hasOwnProperty(h)&&(g.actionParam[h]=a[h]);else g.actionParam=a;g.page=f,$(this+"").each(function(){c.grid(this,g,!0)})}})}}else switch(d.actionType){case"":b.target=d.target,b.action=d.action,a=function(){b.submit()};break;default:a=function(a){!isNaNFn(d.onsubmit)&&(a=d.onsubmit(a)),a&&(mod.loading.init(function(){g.enable()},d.timeout),g.disable(),a._=(new Date).getTime(),$.ajax({url:d.action,data:a,success:function(b){if(!mod.loading.isTimeout){if(mod.loading.clear(),g.enable(),isNaNFn(d.onresponse)||(b=d.onresponse(b)),!isNaNFn(d.submitCallback))return void d.submitCallback(b,a);var c={status:getObjByKey(b,d.statusKey),msg:getObjByKey(b,d.messageKey)};c.status==d.successCode?d.actionCallback&&d.actionCallback(b,a):bsPopup("error",c.msg)}},dataType:"jsonp"==d.actionType?"jsonp":"json",type:d.method}))}}b.check=b.onsubmit=function(){var a,c,d,e,g=!0;for(b.checkElms=[],a=b.elements,c=0,d=a.length;d>c;c++)e=a[c],!/button|submit/.test(e.type)&&e.name&&e.srcBox&&b.checkElms.push(e);for(c=0,d=b.checkElms.length;d>c;c++)e=b.checkElms[c].srcBox,!e.isOk&&(!e.check(f),g=!1);return g&&f(),!1},b.opAttr||(g&&"submit"!=g.type&&$(g).bind("click",function(){b.check()}),$(h).bind("click",function(){b.clean()})),b.clean=b.clear=function(){for(b.checkElms=[],elms=b.elements,i=0,len=elms.length;i<len;i++)fs=elms[i],!/button|submit/.test(fs.type)&&fs.name&&fs.srcBox&&b.checkElms.push(fs);for(b.reset(),i=0,len=b.checkElms.length;i<len;i++)fs=b.checkElms[i],fs.srcBox.reset(),/radio|checkbox/.test(fs.type)&&$(fs).trigger("change")},d.search&&b.check(),!isNaNFn(d.onload)&&d.onload(),b.opAttr=d}})},widget:function(a,b){var c,d,e,f=a?$(a):$(".bs_widget"),g={format:"",required:!1,width:0,linked:"",size:"",title:"",img:"",imgWidth:"",imgHeight:"",method:"",action:"",actionKey:"",actionType:"",actionCallback:function(){},actionDelay:50,onsubmit:function(){},submitCallback:function(){},onresponse:function(){},dateStart:undefined,dateEnd:undefined,split:";",length:0,type:"",onselect:function(){},oncheck:function(){},errorText:"",defaultText:"",defaultValue:"",autocomplete:"",dataKey:global.Config.ajax.key.data,messageKey:global.Config.ajax.key.message,statusKey:global.Config.ajax.key.status,successCode:global.Config.ajax.successCode},h=function(a,b){var c=modAssignment(g,a),d={};return d[c.actionKey]=a.value,!isNaNFn(c.onsubmit)&&(d=c.onsubmit(d)),d?!c.action||/img-upload|song-upload|file-upload|multi-song-upload/.test(c.format)?(c.actionCallback&&c.actionCallback(null,d),a.isOk=!0,!0):(console.log(a.oValue),a.oValue==a.value?a.isOk:(a.isOk=undefined,a.srcBox.loading.init(),d._=(new Date).getTime(),void $.ajax({url:c.action,data:d,success:function(e){if(a.srcBox.loading.isTimeout)return a.isOk=!1,void(b&&b(a.isOk,a));if(a.srcBox.loading.clear(),isNaNFn(c.onresponse)||(e=c.onresponse(e)),!isNaNFn(c.submitCallback))return a.oValue=a.value,c.submitCallback(e,d,a),void(b&&b(a.isOk,a));var f={status:getObjByKey(e,c.statusKey),msg:getObjByKey(e,c.messageKey)};f.status==c.successCode?(a.isOk=!0,a.oValue=a.value,c.actionCallback(e,d),b&&b(a.isOk,a)):(a.srcBox.error(f.msg),a.isOk=!1,a.oValue=a.value,b&&b(a.isOk,a))},dataType:"jsonp"==c.actionType?"jsonp":"json",type:c.method||"GET"}))):(a.isOk=!1,!1)},i=function(a,b){var c,d,e,f,g=a.parentNode,i=a.type;if(("button"==i&&/bs_btn_s0/.test(g.className)||/checkbox|radio/.test(i)&&/bs_checkarea/.test(g.className))&&(g=g.parentNode),g&&-1!=g.className.indexOf("bs_detectbox"))c=g;else{for(c=document.createElement("div"),c.className="bs_detectbox";g.children.length>0;)c.appendChild(g.children[0]);g.innerHTML="",g.appendChild(c),c.tips=document.createElement("div"),c.tips.className="bs_detectbox_msg",e=document.createElement("div"),e.className="bs_detectbox_msgbox",f=document.createElement("i"),f.className="bs_detectbox_msg_tri",d=document.createElement("i"),d.className="bs_detectbox_msg_stu",c.tips.cnt=document.createElement("div"),c.tips.cnt.className="bs_detectbox_msg_cnt",c.tips.show=function(a){$(c.tips).addClass("bs_detectbox_msg_show"),c.tips.fixed(),$(window).bind("resize",c.tips.fixed),$(window).bind("scroll",c.tips.fixed),clearTimeout(c.tips.delayKey),a&&(c.tips.delayKey=setTimeout(function(){c.tips.hide()},a))},c.tips.hide=function(){$(c.tips).removeClass("bs_detectbox_msg_show"),$(window).unbind("resize",c.tips.fixed),$(window).unbind("scroll",c.tips.fixed)},c.tips.fixed=function(){for(var a=c.parentNode;a&&!/bs_pop_bd|bs_inset_frame/.test(a.className);)a=a.parentNode;a=a||document.body,a.appendChild(c.tips);var b=getPosition(c),d=getPosition(a),e=getTopperZIndex(c)+5,f=b.left-d.left,g=b.top-d.top-c.tips.offsetHeight;0>g&&(g=0),0>f&&(f=0),c.tips.style.left=f+"px",c.tips.style.top=g+"px",c.tips.style.zIndex=e},c.reset=function(){c.clear(),c.tips.hide(),c.tips.cnt.innerHTML="",c.tips.status="notice"},c.srcItems=[],c.success=function(a){a=a||"",c.clear(),$(c).addClass("bs_detectbox_success"),$(c.tips).addClass("bs_detectbox_success"),c.tips.cnt.innerHTML=a,c.tips.status="success"},c.error=function(a){a=a||"",c.clear(),$(c).addClass("bs_detectbox_error"),$(c.tips).addClass("bs_detectbox_error"),console.log("thisway",c.tips.cnt),c.tips.cnt.innerHTML=a,c.tips.status="error",c.tips.show(2e3)},c.notice=function(a){a=a||"",c.clear(),a?($(c).addClass("bs_detectbox_notice"),$(c.tips).addClass("bs_detectbox_notice"),c.tips.cnt.innerHTML=a):(c.tips.cnt.innerHTML="",c.tips.hide()),c.tips.status="notice"},c.clear=function(){$(c).removeClass("bs_detectbox_error").removeClass("bs_detectbox_loading").removeClass("bs_detectbox_success").removeClass("bs_detectbox_notice"),$(c.tips).removeClass("bs_detectbox_error").removeClass("bs_detectbox_loading").removeClass("bs_detectbox_success").removeClass("bs_detectbox_notice")},c.loading={init:function(a,b){clearTimeout(c.loading.timeoutKey),c.clear(),$(c).addClass("bs_detectbox_loading"),$(c.tips).addClass("bs_detectbox_loading"),c.tips.cnt.innerHTML=b||"正在校验",c.loading.isTimeout=!1,c.loading.timeoutKey=setTimeout(function(){c.error(global.Config.ajax.timeoutText),c.loading.isTimeout=!0,"function"==typeof a&&a()},global.Config.ajax.timeout)},clear:function(){c.clear(),c.tips.cnt.innerHTML="",clearTimeout(c.loading.timeoutKey),c.tips.hide()}};var j=$(".bs_inset_frame")[0];j=j&&isBelong(j,a)?j:document.body,j.appendChild(c.tips),c.tips.appendChild(e),e.appendChild(f),e.appendChild(d),e.appendChild(c.tips.cnt),/radio|checkbox/.test(i)?c.check=function(a){for(var c=!1,d=0,e=this.srcItems.length;e>d;d++)if(this.srcItems[d].checked){c=!0;break}return b.required?c?(this.success(),this.isOk=!0,"function"==typeof a&&a(this.isOk,this.srcItems[0]),!0):(this.srcItems[0]&&this.error(this.srcItems[0].errorText),this.isOk=!1,"function"==typeof a&&a(this.isOk,this.srcItems[0]),!1):(this.notice(),this.isOk=!0,"function"==typeof a&&a(this.isOk,this.srcItems[0]),!0)}:c.check=function(a){var b,d,e,f,g=!1;for(b=0,d=c.srcItems.length;d>b;b++)if(e=c.srcItems[b],g||e.required||e.value.trim()){if(g=!0,!e.localCheck())return c.isOk=!1,void(a&&a(c.isOk,c.srcItems[0]));switch(f=h(e,function(a,b){c.check()})){case!0:continue;case!1:return c.isOk=!1,void(a&&a(c.isOk,c.srcItems[0]));case undefined:default:return}}return g?c.success():c.notice(),c.isOk=!0,"function"==typeof a&&a(c.isOk,c.srcItems[0]),!0}}return!c.frontName&&(c.frontName="bs"+Math.round(1e10*Math.random())),c},j={init:function(a,b){var c=a,d=c.tagName.toLowerCase();c.type;if(!(1!=c.nodeType||isEqual(c.opAttr,b)&&c.srcBox)){switch(/button|submit/.test(c.type)||(c.srcBox=i(c,b),j.common(c,b)),d){case"input":switch(c.type){case"text":case"password":case"hidden":switch(b.format){case"img-upload":case"file-upload":case"song-upload":j.upload(c,b);break;case"tags":j.tags(c,b);break;case"code":j.code(c,b);break;case"email":j.email(c,b),j.autocomplete(c,b);break;case"mobile":j.mobile(c,b),j.autocomplete(c,b);break;case"idcard":j.idcard(c,b);break;case"date":j.date(c,b);break;case"date-time":j.datetime(c,b);break;case"date-interval":case"date-interal":j.dateInterval(c,b);break;case"password":j.password(c,b);break;case"password2":j.password2(c,b);break;default:j.custom(c,b),j.autocomplete(c,b)}break;case"checkbox":case"radio":j.checkbox(c,b);break;case"button":case"submit":mod.button(c,b);break;default:j.custom(c,b)}break;case"textarea":j.textarea(c,b);break;case"select":j.selectbox(c,b);break;default:return}c.opAttr=b}},common:function(a,b){var c=a,d=parseInt(b.width,10),e=a.type;c.extCheck=isNaNFn(b.oncheck)?function(){return!0}:function(){var a=b.oncheck(c.value);return a===undefined||a===!0?!0:(c.srcBox.error(a),!1)},c.required=b.required,c.defaultText=b.defaultText,c.errorText=b.errorText,!isNaN(d)&&d&&"hidden"!=e&&(c.style.width=d+"px"),/checkbox|radio/.test(e)||$(c).bind("focus",function(){switch(c.srcBox.tips.show(),c.srcBox.tips.status){case"error":break;case"success":c.srcBox.success(c.defaultText);break;case"notice":c.srcBox.notice(c.defaultText);break;default:c.srcBox.notice(c.defaultText)}}),$(c).bind("blur",function(){c.srcBox.tips.hide(),c.srcBox.check()})},upload:function(a,b){var c,d,e=a,f=(new Date).getTime(),g=$(e).parent().children().index(e),h=b.format.replace("-",""),i="bs_flash_"+h,j=e.name+h+f,k=j+"Callback";switch(b.format){case"img-upload":d="Images|jpg|png";break;case"song-upload":d="Audios|mp3|wav|ape";break;case"file-upload":d="Documents|doc|xls|ppt|pdf"}g-1>=0&&e.parentNode.children[g-1].className==i?c=e.parentNode.children[g-1]:(c=document.createElement("div"),c.id=j,c.className=i,e.parentNode.insertBefore(c,e)),e.style.display="none",c.innerHTML=flash.init(c.id,{flashUrl:global.Config.domain+global.Config.swf.imgUpload+"?callback="+k+"&fileurl="+encodeURIComponent(b.action||global.Config.upload.imagePath)+"&filetype="+d+"&method=get&filesize=1073741824",width:500,height:100}),global[k]=function(a){var c=JSON.parse(a);isNaNFn(b.onresponse)||(c=b.onresponse(c));var d={status:getObjByKey(c,b.statusKey),data:getObjByKey(c,b.dataKey),msg:getObjByKey(c,b.messageKey)};return isNaNFn(b.submitCallback)?void(d.status==b.successCode?b.actionCallback&&b.actionCallback(d.data):(e.value="",e.srcBox.error(d.msg))):void b.submitCallback(c)},setTimeout(function(){$(".bs_inset_frame")[0]&&($(".bs_inset_frame")[0].scrollTop+=1)},200),!e.defaultText&&(e.defaultText="选择要上传的文件"),!e.errorText&&(e.errorText="不能为空"),e.localCheck=function(){return e.value=e.value.trim(),""===e.value?(e.srcBox.error(e.defaultText),!1):e.extCheck()},e.srcBox.srcItems.push(e)},tags:function(a,b){var e,f,g=a,h=$(g).parent().children().index(g),i=(new Date).getTime(),j=parseInt(b.width,10);h-1>=0&&-1!=g.parentNode.children[h-1].className.indexOf("bs_tags_area")?e=g.parentNode:(e=document.createElement("div"),e.id=g.name+"tagArea"+i,g.parentNode.insertBefore(e,g)),e.innerHTML="","select"==b.type?(e.className="bs_tags_area bs_tags_area_select",f=document.createElement("a"),f.className="bs_btn",f.innerHTML="选择",!isNaN(j-50)&&j-50>0&&(e.style.width=j-50+"px"),mod.button(f),e.onclick=function(){$(f).trigger("click")},$(f).bind("click",function(a){stopBubble(a),b.onselect.call(this)})):(e.className="bs_tags_area",f=document.createElement("input"),f.className="bs_tags_area_ipt",!isNaN(j)&&j&&(e.style.width=j+"px"),$(e).bind("click",function(){f.focus()}),$(f).bind("focus",function(){g.srcBox.notice(g.defaultText),g.srcBox.tips.show()}),$(f).bind("blur",function(){n()}),$(f).bind("keyup",function(a){a=a||window.event;var c,d,h=f.value.trim(),i=e.getElementsByTagName("a"),j=b.length?h.getBytes()>b.length:!1,n=b.size?i.length>=b.size:!1,o=h.split(b.split);if(13==a.keyCode){if(""===h)g.srcBox.notice(g.defaultText);else if(n)f.value="",g.srcBox.error("标签最多为"+b.size+"个");else if(j)g.srcBox.error("单个标签最多"+b.length+"个字符，一个汉字算作两个字符");else{for(g.srcBox.notice(g.defaultText),c=0,d=o.length;d>c;c++)l(o[c]);f.value=""}return void stopBubble(a)}if(8==a.keyCode)m();else if(k[b.split]&&k[b.split]==a.keyCode){for(g.srcBox.notice(g.defaultText),c=0,d=o.length;d>c;c++)l(o[c]);f.value=""}}),$(f).bind("keydown",function(a){a=a||window.event,8==a.keyCode&&m()})),g.parentNode.insertBefore(e,g),e.appendChild(f),g.style.display="none";var k={";":186," ":32,",":188},l=function(a){if(a&&""!==a.trim()){var b=document.createElement("a"),c=document.createElement("i");b.className="bs_tags_area_tag",b.myText=b.innerHTML=a,b.appendChild(c),e.appendChild(b),e.appendChild(f),c.onclick=function(a){stopBubble(a);try{this.parentNode.parentNode.removeChild(this.parentNode)}catch(b){}n()}}},m=function(){var a=e.getElementsByTagName("a"),b=a.length>0?a[a.length-1]:null;if(""===f.value&&b){f.value=b.textContent||b.innerText;try{b.parentNode.removeChild(b)}catch(c){}f.focus()}},n=function(){var a,c,d,h,i="select"==b.type?"":f.value.trim(),j=e.getElementsByTagName("a"),k=b.length?i.getBytes()>b.length:!1,m=b.size?j.length>=b.size:!1,n=i.split(b.split),o=[],p=[];if(k)g.srcBox.error("单个标签最多"+b.length+"个字符，一个汉字算作两个字符"),g.isOk=!1;else{if(m)f.value="";else{for(a=0,d=n.length;d>a;a++)l(n[a]);f.value=""}for(a=0;a<j.length;a++)for(c=a+1;c<j.length;)j[a].myText==j[c].myText?j[c].parentNode.removeChild(j[c]):c++;if(b.length&&j.length>b.length)for(;j.length>b.length;)j[b.length]&&j[b.length].parentNode.removeChild(j[b.length]);for(a=0,d=j.length;d>a;a++)h=j[a],p.push(h),o.push(h.myText);g.value=o.join(b.split),g.isOk=!0}g.srcBox.check()},o=g.value.split(b.split);for(c=0,d=o.length;d>c;c++)l(o[c]);g.add=function(a){l(a),n()},g.remove=function(a){for(var b,c=e.getElementsByTagName("a"),d=0,f=c.length;f>d;d++)b=c[d],b&&b.myText==a&&b.parentNode.removeChild(b);n()},!g.defaultText&&(g.defaultText="输入单词后请按回车 或 "+b.split+" 生成词条"),!g.errorText&&(g.errorText="不能为空"),g.localCheck=function(){return g.isOk},g.srcBox.srcItems.push(g)},checkbox:function(a,b){var c,d,e,f,g,h=a,i=a.type.toLowerCase();!b.imgWidth&&(b.imgWidth=100),!b.imgHeight&&(b.imgHeight=100),$(h).addClass("checkbox"==i?"bs_chkbox":"bs_rdobox"),-1!=h.parentNode.className.indexOf("bs_checkarea")?(c=h.parentNode,d=$(c).find(".cnt")[0]):(c=document.createElement("label"),c.className="bs_checkarea",d=document.createElement("span"),d.className="cnt",h.parentNode.insertBefore(c,h),c.appendChild(h)),d.innerHTML=b.title,h.srcBox.index||(h.srcBox.index=0),b.img&&(e=$(c).find(".img")[0],e||(e=new Image,e.className="img",c.appendChild(e)),e.width=b.imgWidth,e.height=b.imgHeight,e.src=b.img,c.style.width=b.imgWidth+"px",$(c).addClass("bs_checkarea_withimg")),c.appendChild(d),"other"==b.format&&(f=$(c).find(".ipt")[0],f||(f=document.createElement("input"),f.className="ipt",c.appendChild(f),f.onfocus=function(){this.srcCheck.checked=!0,$(h).trigger("change")},f.onblur=function(){this.value=this.value.trim(),this.srcCheck.value=this.value,this.srcCheck.checked=this.value?!0:!1,$(h).trigger("change")}),f.srcCheck=h),h.id||(h.id=h.srcBox.frontName+h.name+"chk"+h.srcBox.index++),c.htmlFor=h.id,"checkbox"==i?g=function(){this.checked?($(this).parent().addClass("bs_checkarea_cur"),f&&f.focus()):$(this).parent().removeClass("bs_checkarea_cur")}:"radio"==i&&(g=function(){$(this).parent().addClass("bs_checkarea_cur").siblings(".bs_checkarea").removeClass("bs_checkarea_cur"),f&&f.focus()}),$(h).change(g),h.checked&&$(h).trigger("change"),!h.defaultText&&(h.defaultText="请选择"),!h.errorText&&(h.errorText="请选择"),h.localCheck=function(){return this.checked},h.srcBox.srcItems.push(h)},autocomplete:function(a,b){var c,d=a;b.autocomplete&&(d.autocomplete="off",c=document.createElement("div"),c.className="bs_drawbox",c.style.display="none",c.innerHTML=["<span>请选择或继续输入…</span>","<div></div>"].join(""),/^http[s]*:\/\/[^,]+$/gi.test(b.autocomplete)&&b.actionType&&b.method?c.init=function(a){var d=function(){var d,e,f,g=(a.value.trim(),"");a.myIndex=-1;var h={};h[b.actionKey||a.name]=a.value,h._=(new Date).getTime(),!isNaNFn(b.onsubmit)&&(h=b.onsubmit(h)),h&&(a.srcBox.loading.init(),$.ajax({url:b.autocomplete,data:h,success:function(h){if(!a.srcBox.loading.isTimeout){a.srcBox.loading.clear();var i={data:getObjByKey(h,b.dataKey),status:getObjByKey(h,b.statusKey),msg:getObjByKey(h,b.messageKey)};if(console.log(i),i.status==b.successCode?c.myAutos=i.data:c.myAutos=[],0===c.myAutos.length)return void c.hide();for(d=0,e=c.myAutos.length;e>d;d++)f=c.myAutos[d],""!==f&&(g+='<a href="javascript:;">'+f+"</a>");c.children[1].innerHTML=g,c.show(a)}},dataType:"jsonp"==b.actionType?"jsonp":"json",type:b.method||"GET"}))};b.actionDelay?(clearTimeout(c.delayKey),c.delayKey=setTimeout(d,b.actionDelay)):d()}:(c.myAutos=b.autocomplete.split(","),c.init=function(a){var b,c,d,e,f,g,h,i=a.value.trim(),j="";if(a.myIndex=-1,""===i)return void this.hide();for(b=0,c=this.myAutos.length;c>b;b++)d=this.myAutos[b].trim(),g="*"==d.substr(0,1),g&&!d.substr(1)||!d||(h="",g?(e=i.indexOf(d.substr(1,1)),f=-1!=e?i.substr(e).length:0,-1==e?h=i+d.substr(1):i.substr(e,f)==d.substr(1,f)&&(h=i.substr(0,e)+d.substr(1))):i==d.substr(0,i.length)&&(h=d),h&&(j+='<a href="javascript:;">'+h+"</a>"));j?(this.children[1].innerHTML=j,this.show(a)):this.hide()}),c.distance=1,c.show=function(a){if(a){var b=getPosition(a);this.style.display="",this.style.left=b.left+"px",this.style.top=a.offsetHeight+b.top+this.distance+"px";var c=$(".bs_inset_frame")[0],e=c&&isBelong(c,d)?c:document.body;e.appendChild(this);var f=getTopperZIndex(d)||1;!isNaN(f)&&(this.style.zIndex=Number(f)+5)}},c.hide=function(){this.style.display="none"},$(d).bind("keyup",function(a){if(a=a||window.event,this.isChinese)c.init(this);else{if(38==a.keyCode||40==a.keyCode||13==a.keyCode)return;c.init(this)}}),$(d).bind("focus",function(){c.init(this),clearTimeout(this.blurTimeoutKey)}),$(d).bind("keydown",function(a){a=a||window.event;var b,d,e=c.getElementsByTagName("a");switch(this.myIndex===undefined&&(this.myIndex=-1),229==a.keyCode?this.isChinese=!0:this.isChinese=!1,a.keyCode){case 38:for(b=0,d=e.length;d>b;b++)e[b].className="";this.myIndex-1>=0?this.myIndex-=1:this.myIndex=e.length-1,e[this.myIndex].className="cur";break;case 40:for(b=0,d=e.length;d>b;b++)e[b].className="";this.myIndex+1<=e.length-1?this.myIndex+=1:this.myIndex=0,e[this.myIndex].className="cur";break;case 13:e[this.myIndex]?(this.value=e[this.myIndex].innerHTML,c.hide(),a.preventDefault&&a.preventDefault(),a.returnValue=!1):c.init(this);break;case 9:c.hide();break;default:c.init(this)}}),$(d).bind("blur",function(){clearTimeout(this.blurTimeoutKey),this.blurTimeoutKey=setTimeout(function(){c.hide()},1e3)}),$(c).bind("mouseover",function(a){a=a||window.event;var b=a.target||a.srcElement;if("A"==b.tagName)for(var c=this.getElementsByTagName("a"),e=0,f=c.length;f>e;e++)c[e]==b?(d.myIndex=e,c[e].className="cur"):c[e].className=""}),$(c).bind("click",function(a){d.srcBox.notice(),a=a||window.event;var b=a.target||a.srcElement;"A"==b.tagName&&(d.focus(),d.value=b.innerHTML,d.blur(),c.hide(),"preventDefault"in a?a.preventDefault():a.returnValue=!1)}),$(".bs_inset_frame").length>0?$(".bs_inset_frame").append(c):document.body.appendChild(c))},button:function(a,b){var c=a;mod.button(c)},textarea:function(a,b){var c=a;$(c).addClass("bs_textareabox"),!c.defaultText&&(c.defaultText="请输入"),!c.errorText&&(c.errorText="不能为空"),c.myReg=makeFunction(b.format),c.localCheck=function(){return c.value=c.value.trim(),""===c.value?(c.srcBox.error(c.defaultText),!1):c.myReg instanceof RegExp?c.value.match(c.myReg)?c.extCheck():(c.srcBox.error(c.errorText),!1):c.extCheck()},c.srcBox.srcItems.push(c)},selectbox:function(a,b){var c,d,f,g,h,i,j=a,k=b.action&&b.method,l=j.value,m=function(){var a,b,c,d,e,f=[],g=[];for(a=0,b=j.linked.options.length;b>a;a++)c=j.linked.options[a],c.selected&&f.push(c.value);for(a=0,b=f.length;b>a;a++)c=f[a],j.myOp[c]&&(g=g.concat(j.myOp[c]));for(j.innerHTML="",a=0,b=g.length;b>a;a++)for(j.options[a]=new Option,j.options[a].text=g[a].text,j.options[a].value=g[a].value,d=0,e=f.length;e>d;d++)f[d]==j.options[a].value&&(j.options[a].selected=!0)};if($(j).addClass("bs_selectbox"),j.linked=$(b.linked)[0],j.linked){for(!j.linked.myChild&&(j.linked.myChild=[]),j.linked.myChild.push(j),j.myOp={"":{text:"请选择",value:""}},d=0,f=j.options.length;f>d;d++)g=j.options[d],h=$(g).attr("mod-belong"),!j.myOp[h]&&(j.myOp[h]=[]),!j.myOp[h].push({text:g.text,value:g.value});m(),$(j.linked).change(k?function(){j.ajaxHandle()}:function(){j.myOp[this.value]||[];m(),$(j.linked.myChild).change()})}switch(k&&(!j.ajaxData&&(j.ajaxData={}),j.reset=function(){j.innerHTML="",j.options[0]=new Option,j.options[0].text="请选择",j.options[0].value=""},j.dataFill=function(a){j.reset();var b;if(a)for(var c=0,d=a.length;d>c;c++)b=new Option,"object"==typeof a[c]?(b.value=a[c].value,b.text=a[c].text):b.text=b.value=a[c],b.value==l&&(b.selected=!0),j.options.add(b)},j.ajaxHandle=function(){var a,c,d,e=j.value,f=j.linked?j.ajaxData[j.linked.value]:j.nowData,h={};j.linked&&j.nowData&&j.ajaxData[j.linked.value]==j.nowData||!j.linked&&j.nowData||(f?(j.dataFill(f),j.nowData=f,j.linked&&(j.ajaxData[j.linked.value]=f)):(a=b.actionKey,c=j.linked?j.linked.value:"",a?(h[a]=c,d=b.action):d=b.action,h._=(new Date).getTime(),j.srcBox.loading.init(function(){j.nowData=undefined,j.linked&&(j.ajaxData[j.linked.value]=undefined)},"获取数据ing"),$.ajax({url:urlRender(d),data:h,success:function(a){if(!j.srcBox.loading.isTimeout){j.srcBox.loading.clear();var c={status:getObjByKey(a,b.statusKey),data:getObjByKey(a,b.dataKey),msg:getObjByKey(a,b.messageKey)};if(c.status==b.successCode){j.reset();for(var d,f=0,i=c.data.length;i>f;f++)d=new Option,"object"==typeof c.data[f]?(d.value=c.data[f].value,d.text=c.data[f].text):d.value=d.text=c.data[f],d.value==e&&(d.selected=!0),j.options.add(d);j.nowData=c.data,j.linked&&(j.ajaxData[j.linked.value]=c.data)}else j.srcBox.error(c.msg),j.nowData=undefined,j.linked&&(j.ajaxData[j.linked.value]=undefined);b.actionCallback&&b.actionCallback(a,h),b.defaultValue&&!function(){for(f=0,i=j.options.length;i>f;f++)if(g=j.options[f],g.value==b.defaultValue)return g.selected=!0,void(""==j.options[0].value&&j.options.remove(j.options[0]))}()}},dataType:"jsonp"==b.actionType?"jsonp":"json",type:b.method||"GET"})))},!j.linked&&j.ajaxHandle()),b.format){case"city":var n=function(){c=document.createElement("select"),c.className="bs_selectbox",j.parentNode.insertBefore(c,j);for(i in global.Config.data.cities)global.Config.data.cities.hasOwnProperty(i)&&c.options.add(new Option(i||"请选择",i));if(e=function(){j.innerHTML="";for(var a,b=0,c=global.Config.data.cities[this.value].length;c>b;b++)a=global.Config.data.cities[this.value][b],j.options.add(new Option(a,a))},$(c).change(e),l)for(i in global.Config.data.cities)if(global.Config.data.cities.hasOwnProperty(i)&&new RegExp("[,]*"+l+"[,]*","g").test(global.Config.data.cities[i].join(","))){c.value=i,e.call(c),j.value=l;break}};global.Config.data.cities?n():global.jcLoader({url:global.Config.domain+"js/data/cities.js",type:"js"},n)}!j.defaultText&&(j.defaultText="请选择"),!j.errorText&&(j.errorText="不能为空"),b.defaultValue&&!k&&!function(){for(d=0,f=j.options.length;f>d;d++)if(g=j.options[d],g.value==b.defaultValue)return void(g.selected=!0)}(),j.localCheck=function(){return""===j.value?(j.srcBox.error(j.defaultText),!1):j.extCheck()},j.srcBox.srcItems.push(j)},code:function(a,b){var c=a;$(c).addClass("bs_textbox"),!c.defaultText&&(c.defaultText="请输入验证码"),!c.errorText&&(c.errorText="验证码错误"),c.mySize=b.size,c.localCheck=function(){return c.value=c.value.trim(),""===c.value?(c.srcBox.error(c.defaultText),!1):isNaN(c.mySize)||c.value.length==c.mySize?c.extCheck():(c.srcBox.error(c.errorText),!1)},c.srcBox.srcItems.push(c)},email:function(a,b){var c=a;$(c).addClass("bs_textbox"),c.defaultText="请输入电子邮箱",c.localCheck=function(){return c.value=c.value.trim(),c.value.match(global.Config.reg.email)?c.extCheck():(c.srcBox.error("请输入可用的邮箱地址"),!1)},c.srcBox.srcItems.push(c),b.autocomplete=["*@qq.com","*@163.com","*@126.com","*@sina.com","*@gmail.com","*@sohu.com","*@hotmail.com","*@139.com","*@189.cn","*@wo.com.cn"].join(",")},mobile:function(a,b){var c=a;$(c).addClass("bs_textbox"),c.defaultText="请输入手机号码",c.localCheck=function(){return c.value=c.value.trim(),""===c.value?(c.srcBox.error(c.defaultText),!1):c.value.match(global.Config.reg.mobile)?c.extCheck():(c.srcBox.error("请输入可用的手机号码"),!1)},c.srcBox.srcItems.push(c)},idcard:function(a,b){var c=a;$(c).addClass("bs_textbox"),!c.defaultText&&(c.defaultText="请正确填写身份证号码"),!c.errorText&&(c.errorText="请正确填写身份证号码"),c.localCheck=function(){var a,b,d,e,f,g,h,i,j,k=c.value=c.value.trim(),l=k.length;if(!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(k))return c.srcBox.error(c.errorText),!1;if(15==l)return a=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/),b=k.match(a),d=new Date("19"+b[2]+"/"+b[3]+"/"+b[4]),e=d.getYear()==Number(b[2])&&d.getMonth()+1==Number(b[3])&&d.getDate()==Number(b[4]),e?c.extCheck():(c.srcBox.error(c.errorText),!1);if(18==l){if(a=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/),b=k.match(a),d=new Date(b[2]+"/"+b[3]+"/"+b[4]),e=d.getFullYear()==Number(b[2])&&d.getMonth()+1==Number(b[3])&&d.getDate()==Number(b[4])){for(f=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),g=new Array("1","0","X","9","8","7","6","5","4","3","2"),h=0,i,i=0;17>i;i++)h+=k.substr(i,1)*f[i];return j=g[h%11],j!=k.substr(17,1)?(c.srcBox.error(c.errorText),!1):c.extCheck()}return c.srcBox.error(c.errorText),!1}return c.srcBox.error(c.errorText),!1},c.srcBox.srcItems.push(c)},date:function(a,b){var c=a,d=$(".bs_inset_frame")[0];$(c).addClass("bs_textbox"),!c.defaultText&&(c.defaultText=["请选择",b.dateStart?"大于 "+b.dateStart:"",b.dateEnd?"小于 "+b.dateEnd:"",b.dateStart||b.dateEnd?"的":"","日期"].join("")),global.jnsCalendar(c,{type:"date",zIndex:200,format:"YYYY-MM-DD",dateRangeStart:b.dateStart,dateRangeEnd:b.dateEnd,callback:function(){c.srcBox.check()},onload:function(){var a=$(".bs_inset_frame")[0],b=a&&isBelong(a,c)?a:document.body;b.appendChild(this);var d=getTopperZIndex(c)||1;!isNaN(d)&&(this.style.zIndex=Number(d)+5)},appendTarget:d&&isBelong(d,c)?d:document.body}).init(),c.localCheck=function(){return c.value=c.value.trim(),""===c.value?(c.srcBox.error(c.defaultText),!1):c.extCheck()},c.srcBox.srcItems.push(c)},datetime:function(a,b){var c=a,d=$(".bs_inset_frame")[0];$(c).addClass("bs_textbox"),!c.defaultText&&(c.defaultText=["请选择",b.dateStart?"大于 "+b.dateStart:"",b.dateEnd?"小于 "+b.dateEnd:"",b.dateStart||b.dateEnd?"的":"","日期"].join("")),global.jnsCalendar(c,{zIndex:200,type:"dateTime",format:"YYYY-MM-DD hh:mm:ss",dateRangeStart:b.dateStart,dateRangeEnd:b.dateEnd,callback:function(){c.srcBox.check()},onload:function(){var a=$(".bs_inset_frame")[0],b=a&&isBelong(a,c)?a:document.body;b.appendChild(this);var d=getTopperZIndex(c);!isNaN(d)&&(this.style.zIndex=Number(d)+5)},appendTarget:d&&isBelong(d,c)?d:document.body}).init(),c.localCheck=function(){return c.value=c.value.trim(),""===c.value?(c.srcBox.error(c.defaultText),!1):c.extCheck()},$(c).change(function(){c.srcBox.check()}),c.srcBox.srcItems.push(c)},dateInterval:function(a,b){var c=a,d=$(".bs_inset_frame")[0];$(c).addClass("bs_textbox"),!c.defaultText&&(c.defaultText=["请选择",b.dateStart?"大于 "+b.dateStart:"",b.dateEnd?"小于 "+b.dateEnd:"",b.dateStart||b.dateEnd?"的":"","日期"].join("")),
c.linked=$(b.linked)[0],c.linked&&($(c.linked).addClass("bs_textbox"),global.jnsCalendar([c,c.linked],{zIndex:200,type:"intervalTime",startDateInput:c,endDateInput:c.linked,dateRangeStart:b.dateStart,dateRangeEnd:b.dateEnd,callback:function(){c.srcBox.check()},onload:function(){var a=$(".bs_inset_frame")[0],b=a&&isBelong(a,c)?a:document.body;b.appendChild(this);var d=getTopperZIndex(c);!isNaN(d)&&(this.style.zIndex=Number(d)+5)},appendTarget:d&&isBelong(d,c)?d:document.body}).init()),c.localCheck=function(){return c.value=c.value.trim(),""===c.value?(c.srcBox.error(c.defaultText),!1):c.extCheck()},$(c).change(function(){c.srcBox.check()}),c.srcBox.srcItems.push(c)},password:function(a,b){var c=a;$(c).addClass("bs_textbox"),c.defaultText="密码需由 6-16个字母、数字和符号组成",c.localCheck=function(){var a=c.value=c.value.trim();return a.match(global.Config.reg.password)?c.extCheck():(c.srcBox.error("请输入6-16位的数字或字符"),!1)},c.srcBox.srcItems.push(c)},password2:function(a,b){var c=a;$(c).addClass("bs_textbox"),c.defaultText="请再次输入密码",c.linked=$(b.linked)[0],c.localCheck=function(){c.value=c.value.trim();return c.linked?""===c.linked.value&&""===c.value?(c.srcBox.notice(),!1):""!==c.linked.value&&""===c.value?(c.srcBox.error("请重复密码进行确认"),!1):c.linked.value!==c.value?(c.srcBox.error("两次密码不一致"),!1):c.linked.localCheck()&&c.extCheck():!0},$(c.linked).bind("blur",function(){c.localCheck()}),c.srcBox.srcItems.push(c)},custom:function(a,b){var c=a;$(c).addClass("bs_textbox"),!c.defaultText&&(c.defaultText="请输入"),!c.errorText&&(c.errorText="不能为空"),c.myReg=makeFunction(b.format,"reg"),c.localCheck=function(){if(c.value=c.value.trim(),""===c.value)return c.srcBox.error(c.defaultText),!1;if(c.myReg instanceof RegExp)return c.value.match(c.myReg)?c.extCheck():(c.srcBox.error(c.errorText),!1);if(c.myReg instanceof Function){var a=c.myReg(c.value);switch(a){case undefined:case!0:return c.extCheck();default:return c.srcBox.error(a),!1}}return c.extCheck()},c.srcBox.srcItems.push(c)}};g=modAssignment(g,b),0!==f.length&&f.each(function(){var a=this,b=modAssignment(g,a);j.init(a,b)})},button:function(a,b){var c=a?$(a):$(".bs_btn"),d={size:"",type:""};return d=modAssignment(d,b),c.each(function(){var a,b,c,e,f,g=this,h="",i=modAssignment(d,g);i.size,i.type;if(!(isEqual(g.opAttr,i)||g.parentNode&&/bs_btn_/.test(g.parentNode.className))){switch(i.size){case"big":h+="bs_btn_big";break;case"small":h+="bs_btn_small";break;default:h+="bs_btn_small"}switch(i.type){case"1":case"submit":h+=" bs_btn_s01";break;case"2":h+=" bs_btn_s02";break;case"clear":h+=" bs_btn_s03";break;default:h+=" bs_btn_s03"}switch(g.tagName.toLowerCase()){case"input":b=document.createElement("span"),c=g.parentNode,b.href="javascript:;",c.insertBefore(b,g),b.appendChild(g),$(b).addClass(g.className).removeClass("bs_btn").addClass(h),g.className="",a=b;break;case"a":g.innerHTML="<span>"+g.innerHTML+"</span>",$(g).addClass(h).removeClass("bs_btn"),a=g;break;default:b=document.createElement("a"),c=g.parentNode,e=g.textContent||g.innerText,f=document.createDocumentFragment(),b.href="javascript:;",c.insertBefore(b,g),b.innerHTML="<span>"+e+"</span>",f.appendChild(g),$(b).addClass(h).removeClass("bs_btn"),a=b}g.disable=function(){$(a).addClass("bs_btn_disable"),g.disabled=!0},g.enable=function(){$(a).removeClass("bs_btn_disable"),g.disabled=!1},g.opAttr=i}}),c[0]},grid:function(a,b,c){var d={title:"",action:"",actionType:"",actionMethod:"",actionParam:{},actionCallback:function(){},onload:function(){},onsubmit:function(){},onresponse:function(){},page:0,pageStart:global.Config.ajax.key.pageStart,pageKey:global.Config.ajax.key.page,pagesize:10,sizeKey:global.Config.ajax.key.size,totalKey:global.Config.ajax.key.total,data:[],checkbox:!0,drag:!1,index:!0,nowrap:!1,dataKey:global.Config.ajax.key.data,messageKey:global.Config.ajax.key.message,statusKey:global.Config.ajax.key.status,successCode:global.Config.ajax.successCode,timeout:0,mark:!1,edit:!1,editConfig:{action:"",method:"",actionType:"",actionCallback:function(){},onsubmit:function(){},submitCallback:function(){},onresponse:function(){},messageKey:global.Config.ajax.key.message,statusKey:global.Config.ajax.key.status,successCode:global.Config.ajax.successCode},del:!1,delConfig:{action:"",method:"",actionType:"",actionCallback:function(){},onsubmit:function(){},submitCallback:function(){},onresponse:function(){},messageKey:global.Config.ajax.key.message,statusKey:global.Config.ajax.key.status,successCode:global.Config.ajax.successCode,batchConfig:{enable:!1,action:"",method:"",actionType:"",actionCallback:function(){},onsubmit:function(){},submitCallback:function(){},onresponse:function(){},messageKey:global.Config.ajax.key.message,statusKey:global.Config.ajax.key.status,successCode:global.Config.ajax.successCode}},add:!1,addConfig:{target:undefined,text:"添加到其他列表",width:100,index:"",batchConfig:{enable:!1}},layout:[],hfConfig:{html:"",onload:function(){}}},e=function(a,b){if(b){var c,e,f,g,h,i,j,k,l,m,n,o,p=document.createDocumentFragment(),q=function(a){a=a||window.event,13==a.keyCode&&$(c).parent().find(".ctrl_save").trigger("click")},r=function(a){stopBubble(a)};if(0===d.layout.length)for(h in b)b.hasOwnProperty(h)&&d.layout.push({name:h,field:h});for(!d.editInit&&d.edit&&(d.layout.push({name:"操作",field:"",width:"126",html:['<a class="ctrl_edit right10 " href="javascript:;">修改</a>','<a class="ctrl_save right10 " href="javascript:;">保存</a>','<a class="ctrl_cancel " href="javascript:;">取消</a>'].join("")}),d.editInit=!0),!d.delInit&&d.del&&(d.layout.push({name:"操作",field:"",width:"64",html:['<a class="ctrl_del" href="javascript:;">删除</a>'].join("")}),d.delInit=!0),!d.addInit&&d.add&&(d.layout.push({name:"操作",field:"",width:d.addConfig.width,html:['<a class="ctrl_add" href="javascript:;">'+d.addConfig.text+"</a>"].join("")}),d.addInit=!0),f=0,g=d.layout.length;g>f;f++){if(c=document.createElement(a),e=d.layout[f],"th"==a&&e.width&&(c.width=e.width),"th"==a)c.innerHTML=['<div class="cnt">'+e.name+"</div>",f!=g-1?'<div class="col_resize"></div>':""].join(""),e.field?(c.arrange=!0,c.className="arrange"):c.arrange=!1;else{if(e.edit){switch(i=e.width?e.width+(/px|\%/.test(e.width+"")?"":"px"):"",j=b[e.field]||"",c.view=document.createElement("span"),c.view.className="view_item",c.view.value=j,c.view.html=e.html,c.view.innerHTML=tplParse(b,c.view.html)||j,e.edit.type){case"input":c.edit=document.createElement("input"),c.edit.className="edit_item",c.edit.style.width=i,c.edit.value=j;break;case"select":if(e.edit.options&&e.edit.options.length>0)for(c.edit=document.createElement("select"),c.edit.className="edit_item",c.edit.style.width=i,k=0,l=e.edit.options.length;l>k;k++)n=e.edit.options[k],m=new Option,m.value=n.value,m.text=n.text,j==n.value&&(m.selected=!0,c.view.html?(o=clone(b),o[e.field]=m.value,c.view.innerHTML=tplParse(o,c.view.html)):c.view.innerHTML=m.text),c.edit.options.add(m);break;case"textarea":c.edit=document.createElement("textarea"),c.edit.className="edit_item",c.edit.style.width=i,c.edit.value=tplParse(b,c.view.html)||j}c.check=e.edit.check,c.appendChild(c.view),c.edit&&c.appendChild(c.edit)}else c.innerHTML=tplParse(b,e.html)||b[e.field]||"";c.arrange=b[e.field]||"",c.key=e.field,c.edit&&(c.edit.onkeyup=q,c.edit.onclick=r)}p.appendChild(c)}return p}},f=function(b){var c=a.thead.children[0];if(0===c.children.length){var f=document.createElement("th"),g=document.createElement("th"),h=document.createElement("th");f.width=31,!d.checkbox&&(f.style.display="none"),f.innerHTML=['<div class="cnt">','<input type="checkbox" class="bs_checkall" '+(!d.checkbox&&'disabled="disabled"')+" />","</div>",'<div class="col_resize"></div>'].join(""),g.width=36,!d.index&&(g.style.display="none"),g.innerHTML=['<div class="cnt"></div>','<div class="col_resize"></div>'].join(""),h.width=36,!d.drag&&(h.style.display="none"),h.innerHTML=['<div class="cnt"></div>','<div class="col_resize"></div>'].join(""),c.appendChild(f),c.appendChild(g),c.appendChild(h),a.checkall=s.checkall=$(s.thead).find(".bs_checkall")[0],c.appendChild(e("th",b));var i=0,j=a.srcCnt.offsetWidth,k=0,l=0;$(c.children).each(function(){var a=parseInt(this.width,10);a?i+=a:k+=1}),l=parseInt((j-i)/k,10),$(c.children).each(function(){!this.width&&l>0&&(this.width=l)}),$(c).find(".arrange").bind("click",function(){var b=this;"undefined"==typeof b.myRow&&(b.myRow=$(b).parent().children().index(b),b.toggle=!0);var c,d,e=[],f=document.createDocumentFragment();for(c=0,d=a.tbody.rows.length;d>c;c++)e.push(a.tbody.rows[c].cells[b.myRow]);for(e.sort(function(a,c){var d=a.arrange==c.arrange,e=d?a.parentNode.arrange:a.arrange,f=d?c.parentNode.arrange:c.arrange,g=isNaN(e)||isNaN(f)?String(e).localeCompare(String(f)):Number(e)-Number(f);return b.toggle?g:-g}),c=0,d=e.length;d>c;c++)f.appendChild(e[c].parentNode);a.tbody.appendChild(f),b.toggle=!b.toggle,q()}),$(c).find(".col_resize").bind("click",function(a){stopBubble(a)}),$(c).find(".col_resize").bind("mousedown",function(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1;var b=this.parentNode;s.colbar.style.display="",s.colbar.style.left=b.offsetLeft+"px",s.colbar.style.width=b.offsetWidth+"px",s.colbar.srcElement=b,s.colbar.posX=a.clientX-b.offsetWidth,document.onmousemove=function(a){a=a||window.event;var b=a.clientX-s.colbar.posX,c=36;c>b&&(b=c),s.colbar.style.width=b+"px",window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()},window.onblur=window.onlosecapture=document.onmouseup=function(a){var b=parseInt(s.colbar.style.width,10);return b&&(s.colbar.srcElement.width=b),s.colbar.style.display="none",p(),document.onmousemove=document.onmouseup=document.onselectstart=null,!1}}),s.checkall.getItems=s.getItems,s.checkall.check=r,$(s.checkall).bind("click",function(){for(var a=s.getItems(),b=0,c=a.length;c>b;b++)a[b].checked=this.checked,a[b].checked?$(a[b]).parent().parent().addClass("cur"):$(a[b]).parent().parent().removeClass("cur");s.checkall2.checked=this.checked})}},g=function(b){for(var c,d,e=document.createDocumentFragment();a.tbody.children.length>0;)e.appendChild(a.tbody.children[0]);if(!b||!b.length)return void k();for(l(),b.length>0&&f(b[0]),a.checkall2.checked=!1,a.checkall.checked=!1,c=0,d=b.length;d>c;c++)i(b[c],c);setTimeout(function(){a.resize()},0)},h=function(a){if(!a||1!=a.nodeType)return null;for(var b=a,c=0;b&&1==b.nodeType&&"TR"!=b.tagName&&100>c;)b=b.parentNode,c++;return"TR"==b.tagName?b:null},i=function(b,c){var g,i,j,k,l,m,n,o;for(f(b),k=document.createElement("tr"),g=document.createElement("td"),i=document.createElement("td"),j=document.createElement("td"),k.className=c%2?"even":"",g.innerHTML='<input type="checkbox" class="bs_chk" />',!d.checkbox&&(g.style.display="none"),i.innerHTML='<a href="javascript:;" class="ctrl_move" title="位置移动">&uarr;&darr;</a>',!d.drag&&(i.style.display="none"),j.innerHTML=a.page*d.pagesize+(c+1),!d.index&&(j.style.display="none"),j.arrange=j.innerHTML,a.tbody.appendChild(k),k.appendChild(g),k.appendChild(i),k.appendChild(j),k.appendChild(e("td",b)),k.chk=g.children[0],k.chk.data=b,k.num=j,k.arrange="",k.checkItems=[],l=k.getElementsByTagName("td"),m=0,n=l.length;n>m;m++)o=l[m],o.edit&&o.view&&k.checkItems.push(o),o.arrange&&m>2&&(k.arrange+=o.arrange);return d.checkbox?(k.chk.onclick=function(b){stopBubble(b);var c=this;setTimeout(function(){a.checkall.check(),a.checkall2.check(),c.checked?$(c).parent().parent().addClass("cur"):$(c).parent().parent().removeClass("cur")},1)},k.onclick=function(a){a=a||window.event;var b=document.elementFromPoint(a.clientX,a.clientY);"A"!=b.tagName&&"A"!=b.parentNode.tagName&&$(this.chk).trigger("click")}):k.chk.disabled=!0,$(k).find(".ctrl_edit").each(function(){$(this).addClass("view_item").addClass("bs_btn")}).bind("click",function(a){stopBubble(a);var b,c=h(this);$(c).find(".view_item").css("display","none"),b=$(c).find(".edit_item").css("display","")[0],b&&(b.focus(),b.select())}),$(k).find(".ctrl_cancel").each(function(){$(this).addClass("edit_item").addClass("bs_btn")}).bind("click",function(a){stopBubble(a);var b=h(this);for($(b).find(".edit_item").css("display","none"),$(b).find(".view_item").css("display",""),m=0,n=b.checkItems.length;n>m;m++)o=b.checkItems[m],o.edit.value=o.view.value}),$(k).find(".ctrl_save").each(function(){$(this).addClass("edit_item").addClass("bs_btn").attr("mod-type","2"),this.myAttr=modAssignment(d.editConfig,this),this.myAttr.action=tplParse(k.chk.data,this.myAttr.action)}).bind("click",function(a){stopBubble(a);var b,c,d,e,f=h(this),g=this,i=g.myAttr.action&&g.myAttr.actionType?function(){var a={};for(b=0,c=f.checkItems.length;c>b;b++)d=f.checkItems[b],a[d.key]=d.edit.value;!isNaNFn(g.myAttr.onsubmit)&&(a=g.myAttr.onsubmit(a,f.chk.data)),a&&(mod.loading.init(undefined,g.myAttr.timeout),$.ajax({url:g.myAttr.action,data:a,success:function(e){if(!mod.loading.isTimeout){mod.loading.clear(),isNaNFn(g.myAttr.onresponse)||(e=g.myAttr.onresponse(e));var h={status:getObjByKey(e,g.myAttr.statusKey),msg:getObjByKey(e,g.myAttr.messageKey)};if(h.status==h.successCode)for($(f).find(".view_item").css("display",""),$(f).find(".edit_item").css("display","none"),b=0,c=f.checkItems.length;c>b;b++)d=f.checkItems[b],f.chk.data[d.key]=d.arrange=d.view.value=d.edit.value,"INPUT"==d.edit.tagName?d.view.innerHTML=tplParse(f.chk.data,d.view.html)||d.edit.value:"SELECT"==d.edit.tagName?d.view.innerHTML=tplParse(f.chk.data,d.view.html)||d.edit.options[d.edit.selectedIndex].text:d.view.innerHTML=tplParse(f.chk.data,d.view.html)||d.edit.value;return isNaNFn(g.myAttr.submitCallback)?void(h.status==g.myAttr.successCode?(mod.dialog("success",{content:"操作成功",timeout:global.Config.popup.autoHide}),g.myAttr.actionCallback&&g.myAttr.actionCallback(e,a)):mod.dialog("error","操作失败:"+h.msg)):void g.myAttr.submitCallback(e,a)}},dataType:"jsonp"==g.myAttr.actionType?"jsonp":"json",type:g.myAttr.method||"GET"}))}:function(a){isNaNFn(g.myAttr.onresponse)||(a=g.myAttr.onresponse(a));var e={};for(b=0,c=f.checkItems.length;c>b;b++)d=f.checkItems[b],e[d.key]=d.edit.value;if(!isNaNFn(g.myAttr.onsubmit)&&(e=g.myAttr.onsubmit(e,f.chk.data)),e){for($(f).find(".view_item").css("display",""),$(f).find(".edit_item").css("display","none"),b=0,c=f.checkItems.length;c>b;b++)d=f.checkItems[b],f.chk.data[d.key]=d.arrange=d.view.innerHTML=d.edit.value;if(!isNaNFn(g.myAttr.submitCallback))return void g.myAttr.submitCallback(a,e);mod.dialog("success",{content:"操作成功",timeout:global.Config.popup.autoHide}),g.actionCallback&&g.actionCallback(a,e)}},j=function(a,b){mod.dialog("error",{content:b,callback:function(){a.edit.focus(),a.edit.select&&a.edit.select()}})},k=!1;for(b=0,c=f.checkItems.length;c>b;b++)if(d=f.checkItems[b],d.edit.value!=d.view.innerHTML&&(k=!0),d.check&&(e=d.check.call(d.edit,d.edit.value),e!==!0))return void j(d,e);k?i():$(f).find(".ctrl_cancel").trigger("click")}),$(k).find(".ctrl_del").each(function(){$(this).addClass("bs_btn"),this.myAttr=modAssignment(d.delConfig,this),this.myAttr.action=tplParse(k.chk.data,this.myAttr.action)}).bind("click",function(b){stopBubble(b);var c=h(this),d=this,e=(document.createDocumentFragment(),d.myAttr.action?function(){var b=c.chk.data;!isNaNFn(d.myAttr.onsubmit)&&(b=d.myAttr.onsubmit(b,c.chk.data)),b&&(mod.loading.init(undefined,d.myAttr.timeout),$.ajax({url:d.myAttr.action,data:b,success:function(e){if(!mod.loading.isTimeout){mod.loading.clear(),isNaNFn(d.myAttr.onresponse)||(e=d.myAttr.onresponse(e));var f={status:getObjByKey(e,d.myAttr.statusKey),total:getObjByKey(e,d.myAttr.totalKey),msg:getObjByKey(e,d.myAttr.messageKey)};return isNaNFn(d.myAttr.submitCallback)?void(f.status==f.successCode?a.remove(c,function(a){mod.dialog("success",{content:a.length+" 条记录移除成功",timeout:global.Config.popup.autoHide}),d.myAttr.actionCallback&&d.myAttr.actionCallback(e,b)}):mod.dialog("error","操作失败:"+f.msg)):void d.myAttr.submitCallback(e,b)}},dataType:"jsonp"==d.myAttr.actionType?"jsonp":"json",type:d.myAttr.method||"GET"}))}:function(){a.remove(c,function(a){mod.dialog("success",{content:a.length+" 条记录移除成功",timeout:global.Config.popup.autoHide})})});mod.dialog("confirm",{content:"确定要移除此数据？",callback:e})}),$(k).find(".ctrl_move").each(function(){$(this).addClass("bs_btn").addClass("bs_btn_move")}).bind("mousedown",function(b){var c=this,d=document.createDocumentFragment();b=b||window.event,b.preventDefault&&b.preventDefault(),b.returnValue=!1,stopBubble(b),c.myTr||(c.myTr=h(c),document.documentElement.scrollTop+=1,document.body.scrollTop+=1,c.myScroll=document.documentElement.scrollTop?document.documentElement:document.body,c.myMoveTag=document.createElement("div"),c.myMoveTag.className="bs_movetag",c.myMoveTag.innerHTML=(c.myTr.textContent||c.myTr.innerText).substr(0,6)+"..."),document.body.appendChild(c.myMoveTag),c.myMoveTag.style.display="",c.myMoveTag.style.left=b.clientX+c.myScroll.scrollLeft-c.myMoveTag.offsetWidth-10+"px",c.myMoveTag.style.top=b.clientY+c.myScroll.scrollTop-c.myMoveTag.offsetHeight/2+"px",document.onselectstart=function(){return!1},document.onmousemove=function(b){b=b||window.event;var d=document.elementFromPoint(b.clientX,b.clientY),e=h(d);c.myMoveTag.style.left=b.clientX+c.myScroll.scrollLeft-c.myMoveTag.offsetWidth-10+"px",c.myMoveTag.style.top=b.clientY+c.myScroll.scrollTop-c.myMoveTag.offsetHeight/2+"px",$(c.myTr).removeClass("bs_move_style").removeClass("bs_move_style_bottom").siblings().removeClass("bs_move_style").removeClass("bs_move_style_bottom"),e&&isBelong(c.myTr.parentNode,e)?(c.taTr=e,$(c.taTr).addClass("bs_move_style")):isBelong(a.tfoot,d)?(c.taTr=a.tbody.children[a.tbody.children.length-1],$(c.taTr).addClass("bs_move_style_bottom")):c.taTr=null,window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()},document.onmouseup=function(a){d.appendChild(c.myMoveTag),c.taTr&&(-1!=c.taTr.className.indexOf("bs_move_style_bottom")?($(c.taTr).removeClass("bs_move_style_bottom"),c.myTr.parentNode.appendChild(c.myTr)):($(c.taTr).removeClass("bs_move_style"),c.myTr.parentNode.insertBefore(c.myTr,c.taTr)),q()),document.onmousemove=null,document.onmouseup=null,document.onselectstart=null}}),$(k).find(".ctrl_add").each(function(){$(this).addClass("bs_btn").attr("mod-type","1"),this.myAttr=modAssignment(d.addConfig,this)}).bind("click",function(a){stopBubble(a);var b=this,c=h(b),d=b.myAttr.target,e=b.myAttr.index;d&&$(d).each(function(){this.add&&this.add(c.chk.data,undefined,e)})}),$(k).find(".edit_item").css("display","none"),mod.button($(k).find(".bs_btn")),k},j=function(){var b=request.hash(a.id+"Cur");return isNaN(b)||a.page==b?!1:(a.pageTo(Number(b)),!0)},k=function(){a.srcCnt.style.width="auto",$(a.srcMsg).show().removeClass("bs_tablebox_loading").addClass("bs_tablebox_nodata").children().html("<i></i>噢，没有数据喔！"),a.checkall2.checked=!1,a.checkall&&(a.checkall.checked=!1)},l=function(){$(a.srcTable).show(),a.srcBox.style.height="auto",$(a.srcMsg).hide()},m=function(){$(a.srcMsg).show().addClass("bs_tablebox_loading").removeClass("bs_tablebox_nodata").children().html("数据加载中...")},n=function(){o("噢，加载超时喔！")},o=function(b){$(a.srcMsg).show().addClass("bs_tablebox_loading").removeClass("bs_tablebox_nodata").children().html(b),a.resize()},p=function(){if(d.nowrap)a.srcCnt.style.width="",a.srcTable.style.width="",a.srcTable.offsetWidth>a.srcBox.offsetWidth?a.srcCnt.style.width=a.srcTable.offsetWidth+"px":(a.srcCnt.style.width="auto",a.srcTable.style.width="100%");else{a.minWidth=0;var b,c,e,f=a.thead.getElementsByTagName("th");for(b=0,c=f.length;c>b;b++)e=f[b],a.minWidth+=parseInt(e.width||40,10);a.srcCnt.style.width="100%",a.srcTable.style.width="100%",a.minWidth<a.srcBox.offsetWidth&&(a.minWidth=a.srcBox.offsetWidth),0===a.srcTable.offsetWidth?a.srcCnt.style.width="100%":a.srcCnt.style.width=a.srcTable.offsetWidth<a.minWidth?a.minWidth+"px":a.srcTable.offsetWidth+"px"}a.scrollbar.style.width=0!==a.srcCnt.offsetWidth?a.srcBox.offsetWidth/a.srcCnt.offsetWidth*100+"%":"100%";var g=parseInt(a.scrollbar.style.left,10)||0,h=a.scroll.offsetWidth-a.scrollbar.offsetWidth;0>g&&(g=0),g>h&&(g=h),a.scrollbar.style.left=g+"px",a.srcMsg.style.height=a.srcCnt.offsetHeight+"px"},q=function(){var b,c,e,f=a.tbody.getElementsByTagName("tr");for(c=0,e=f.length;e>c;c++)b=f[c],$(b).removeClass("even"),c%2&&$(b).addClass("even"),b.num.innerHTML=a.page*d.pagesize+(c+1)},r=function(){for(var a=!0,b=s.getItems(),c=0,d=b.length;d>c;c++)if(!b[c].checked){a=!1;break}this.checked=a};if(d=modAssignment(d,b),a=$(a)[0]){if(isEqual(a.opAttr,d))return a.reload();a.id||(a.id="modTab"+(new Date).getTime()+Math.round(100*Math.random()),d.mark=!1),$(a).html(['<div class="bs_tablebox">','<div class="bs_tablebox_top"></div>','<div class="bs_tablebox_hd">','<div class="h_tl">共有 <strong  class="red bs_table_totalnum"></strong> 条数据</div>','<div class="h_r bs_leaf"></div>',"</div>",'<div class="bs_tablebox_scroll"><span></span></div>','<div class="bs_tablebox_main" style="height:100px;">','<div class="bs_tablebox_msg"><div class="bs_tablebox_msg_cnt"></div></div>','<div class="bs_tablebox_cnt" style="width:auto">','<table class="bs_table_s1" style="display:none;"></table>',"</div>",'<div class="bs_tablebox_colbar" style="display:none;"></div>',"</div>",'<div class="bs_tablebox_ft">','<div class="f_l" '+(!d.checkbox&&'style="display:none"')+'><input type="checkbox" class="bs_checkall" '+(!d.checkbox&&'disabled="disabled"')+" /> 全选/全不选</div>",'<div class="bs_leaf f_r"></div>',"</div>",'<div class="bs_tablebox_bottom"></div>',"</div>"].join(""));var s={srcBox:$(a).find(".bs_tablebox_main")[0],srcCnt:$(a).find(".bs_tablebox_cnt")[0],totalNum:$(a).find(".bs_table_totalnum")[0],srcTable:$(a).find("table")[0],srcMsg:$(a).find(".bs_tablebox_msg")[0],colbar:$(a).find(".bs_tablebox_colbar")[0],scroll:$(a).find(".bs_tablebox_scroll")[0],scrollbar:$(a).find(".bs_tablebox_scroll")[0].children[0],srcTop:$(a).find(".bs_tablebox_top")[0],srcBottom:$(a).find(".bs_tablebox_bottom")[0],thead:document.createElement("thead"),tbody:document.createElement("tbody"),tfoot:$(a).find(".bs_tablebox_ft")[0],srcLeaf:$(a).find(".bs_leaf"),checkall:undefined,checkall2:undefined,total:0,page:d.page,pagesize:d.pagesize,minWidth:0,resize:p,pageTo:d.action?function(b){mod.loading.init(n,d.timeout),m(),d.actionParam[d.pageKey]=b,a.page=b,d.mark&&historyManage.add(a.id+"Cur",b);var c=clone(d.actionParam);c[d.pageKey]+=d.pageStart,c._=(new Date).getTime(),isNaNFn(d.onsubmit)||(c=d.onsubmit(c)),c&&$.ajax({url:d.action,data:c,success:function(e){if(!mod.loading.isTimeout){mod.loading.clear(),isNaNFn(d.onresponse)||(e=d.onresponse(e));var f={status:getObjByKey(e,d.statusKey),total:getObjByKey(e,d.totalKey)||0,data:getObjByKey(e,d.dataKey)||[],msg:getObjByKey(e,d.messageKey)};f.status==d.successCode?("undefined"==typeof f.total&&(f.total=f.data.length),a.totalNum.innerHTML=f.total,g(f.data),a.total=f.total,0===b&&f.data.length!=d.pagesize&&(a.pagesize=d.pagesize=f.data.length),d.onload.call(a,e),d.actionCallback.call(a,e,c)):(bsPopup("error","数据加载失败:"+f.msg),o(f.msg)),$(a.srcLeaf).html(leafRebuild(b,d.pagesize,f.total,"document.getElementById('"+a.id+"').pageTo"))}},dataType:"jsonp"==d.actionType?"jsonp":"json",type:d.method||"GET"})}:function(b,c){if(c&&(d.data=clone(c)),a.totalNum.innerHTML=d.data.length,a.page=b,d.mark&&historyManage.add(a.id+"Cur",b),a.total=d.data.length,d.data.length){l();var e,f,h=[],i=d.data.length;if(d.pagesize>=i)h=d.data;else{e=b*d.pagesize,f=e+d.pagesize;for(var j=e;f>j&&i>j;j++)h.push(d.data[j])}g(h),$(a.srcLeaf).html(leafRebuild(b,d.pagesize,d.data.length,"document.getElementById('"+a.id+"').pageTo")),d.onload.call(a,d.data),d.actionCallback.call(a,d.data)}else k()},reload:function(b){a.pageTo(a.page,b)},get:function(a){var b,c,d=this.getItems(),e=[];switch(typeof a){case"number":return d[a]?d[a].data:null;case"object":if(1==a.nodeType&&"TR"==a.tagName&&a.chk)return a.chk.data;break;case"string":if("checked"==a){for(b=0,c=d.length;c>b;b++)d[b].checked&&e.push(d[b].data);return e}if("unchecked"==a){for(b=0,c=d.length;c>b;b++)!d[b].checked&&e.push(d[b].data);return e}if("tr:checked"==a){for(b=0,c=d.length;c>b;b++)d[b].checked&&e.push(d[b].parentNode.parentNode);return e}if("tr:unchecked"==a){for(b=0,c=d.length;c>b;b++)!d[b].checked&&e.push(d[b].parentNode.parentNode);return e}break;default:for(b=0,c=d.length;c>b;b++)e.push(d[b].data);return e}},add:function(b,c,e){var f,g,h,j,k,m,n,o,p=a.get(),q=[],r=e?function(a,b){return a[e]===b[e]}:function(a,b){return JSON.stringify(a)===JSON.stringify(b)};for(b.splice!=Array.prototype.splice&&(b=[b]),k=0,m=b.length;m>k;k++){for(g=b[k],j=!1,n=0,o=p.length;o>n;n++)if(h=p[n],r(g,h)){j=!0;break}j||(l(),q.push(g))}for(k=0,m=q.length;m>k;k++)g=q[k],f=i(g,p.length+k);a.checkall&&a.checkall.check(),a.checkall2.check(),a.total+=q.length,a.totalNum.innerHTML=a.total,a.resize(),mod.dialog("success",{content:"共 "+q.length+" 条记录添加到 <strong class='blue'>"+(d.title||a.id)+"</strong> 列表",timeout:global.Config.popup.autoHide}),"function"==typeof c&&c(q)},remove:function(b,c){var d,e,f,g,h,i,j=(this.getItems(),document.createDocumentFragment()),l=a.tbody.getElementsByTagName("tr"),m=[];for(b.splice!=Array.prototype.splice&&(b=[b]),d=0,e=b.length;e>d;d++)switch(f=b[d],typeof f){case"number":f>=0&&f<l.length&&m.push(l[f]);break;case"object":if(1==f.nodeType){"TR"==f.tagName&&m.push(f);break}for(i=JSON.stringify(f),g=0,h=l.length;h>g;g++)if(JSON.stringify(l[g].chk.data)==i){m.push(l[g]);break}}for(d=0,e=m.length;e>d;d++)j.appendChild(m[d]);a.total-=m.length,a.totalNum.innerHTML=a.total,a.tbody.getElementsByTagName("tr").length<=0&&k(),j=null,"function"==typeof c&&c(m)},getItems:function(){for(var a=s.tbody.getElementsByTagName("tr"),b=[],c=0,d=a.length;d>c;c++)b.push(a[c].chk);return b}};s.srcTable.appendChild(s.thead),s.srcTable.appendChild(s.tbody),$(s.thead).append("<tr></tr>"),s.checkall2=$(a).find(".f_l .bs_checkall")[0];var t="";d.addConfig.batchConfig.enable&&d.addConfig.target&&(t='<a href="javascript:;" class="bs_btn ctrl_batch_add right10 " mod-type="1">批量'+d.addConfig.text+"</a>",$(s.srcTop).append(t),$(s.srcBottom).append(t)),d.delConfig.batchConfig.enable&&(t='<a href="javascript:;" class="bs_btn ctrl_batch_del right10 ">批量删除</a>',$(s.srcTop).append(t),$(s.srcBottom).append(t)),d.hfConfig.html&&($(s.srcTop).append(d.hfConfig.html),$(s.srcBottom).append(d.hfConfig.html)),mod.button($(s.srcTop).find(".bs_btn")),mod.button($(s.srcBottom).find(".bs_btn")),$(a).find(".ctrl_batch_add").bind("click",function(b){stopBubble(b);var c=this,e=modAssignment(d.addConfig,c);e.target&&$(e.target).each(function(){this.add&&this.add(a.get("checked"),undefined,e.index)})}),$(a).find(".ctrl_batch_del").bind("click",function(b){stopBubble(b);var c=this,e=modAssignment(d.delConfig.batchConfig,c),f=(document.createDocumentFragment(),e.action?function(){var b=a.get("checked"),c=a.get("tr:checked");!isNaNFn(e.onsubmit)&&(b=e.onsubmit(b,b)),b&&(mod.loading.init(undefined,e.timeout),$.ajax({url:e.action,data:b,success:function(d){if(!mod.loading.isTimeout){mod.loading.clear(),isNaNFn(e.onresponse)||(d=e.onresponse(d));var f={status:getObjByKey(d,e.statusKey),total:getObjByKey(d,e.totalKey),msg:getObjByKey(d,e.messageKey)};return isNaNFn(e.submitCallback)?void(f.status==e.successCode?a.remove(c,function(a){mod.dialog("success",{content:a.length+" 条记录移除成功",timeout:global.Config.popup.autoHide}),e.actionCallback&&e.actionCallback(d,b)}):mod.dialog("error","操作失败:"+f.msg)):void e.submitCallback(d,b)}},dataType:"jsonp"==e.actionType?"jsonp":"json",type:e.method||"GET"}))}:function(){var b=a.get("tr:checked");a.remove(b,function(a){mod.dialog("success",{content:a.length+" 条记录移除成功",timeout:global.Config.popup.autoHide})})});mod.dialog("confirm",{content:"确定要移除此数据？",callback:f})}),!isNaNFn(d.hfConfig.onload)&&d.hfConfig.onload(),s.checkall2.check=r,$(s.checkall2).bind("click",function(){for(var a=s.getItems(),b=0,c=a.length;c>b;b++)a[b].checked=this.checked,a[b].checked?$(a[b]).parent().parent().addClass("cur"):$(a[b]).parent().parent().removeClass("cur");s.checkall.checked=this.checked}),$(s.scrollbar).bind("mousedown",function(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1,this.posX=a.clientX-(parseInt(this.style.left,10)||0),document.onmousemove=function(a){a=a||window.event;var b=a.clientX-s.scrollbar.posX,c=s.scroll.offsetWidth-s.scrollbar.offsetWidth,d=s.srcBox.scrollWidth-s.srcBox.offsetWidth;0>b&&(b=0),b>c&&(b=c),s.scrollbar.style.left=b+"px",s.srcBox.scrollLeft=b/c*d},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}}),$(window).bind("resize",function(){clearTimeout(s.resizeKey),s.resizeKey=setTimeout(p,200)}),$(s.srcBox).bind("scroll",function(){var a=s.srcBox.scrollLeft/(s.srcBox.scrollWidth-s.srcBox.offsetWidth)*(s.scroll.offsetWidth-s.scrollbar.offsetWidth);!isNaN(a)&&(s.scrollbar.style.left=a+"px")});for(var u in s)s.hasOwnProperty(u)&&(a[u]=s[u]);return c&&d.mark&&request.hash(a.id+"Cur",a.page),d.mark&&historyManage.init(j,a.id),!j()&&a.pageTo(a.page),a.opAttr=d,a}},dialog:function(a,b){return bsPopup(a,b)},menu:function(a,b){var c=a?$(a):$(".bs_menu"),d={checkbox:!1,icon:!0,hrefTarget:"",show:!1,defaultValue:[],reset:!1};return d=modAssignment(d,b),c.each(function(){var a=this,b=modAssignment(d,a);(!isEqual(a.opAttr,b)||d.reset)&&($(a).addClass("bs_menu"),b.checkbox?$(a).removeClass("bs_menu_nochk"):$(a).addClass("bs_menu_nochk"),b.icon?$(a).removeClass("bs_menu_nodoc"):$(a).addClass("bs_menu_nodoc"),$(a).find("a").each(function(){var a,c,d,e,f=this,g=f.parentNode;if("LI"==g.tagName)a=document.createElement("div"),a.className="bs_box",c=document.createElement("i"),c.className="bs_swh",d=document.createElement("i"),d.className="bs_chk",e=document.createElement("i"),e.className="bs_doc",a.appendChild(c),a.appendChild(d),a.appendChild(e),f.parentNode.insertBefore(a,f),a.appendChild(f);else{if(-1==g.className.indexOf("bs_box"))return;a=g,g=g.parentNode,c=$(a).find(".bs_swh")[0],d=$(a).find(".bs_chk")[0]}b.hrefTarget&&(f.target=b.hrefTarget),f.title=(f.textContent||f.innerText).replace(/\t|\r|\n/g," ").replace(/\s+/g," "),0!==$(g).find("ul").length?$(a).addClass("bs_withsub"):$(a).removeClass("bs_withsub"),b.checkbox?($(f).attr("mod-checked")?$(d).parent().addClass("bs_chk_checked"):$(d).parent().removeClass("bs_chk_checked"),f.href="javascript:;",f.target="",d.value=$(f).attr("mod-value"),f.onclick=function(){$(d).trigger("click")}):(f.onclick=d.onclick=null,/^javascript:/gi.test(f.href)&&(f.target="",f.onclick=function(){$(c).trigger("click")})),c.onclick=function(){var a=this.parentNode;-1!=a.className.indexOf("bs_withsub")&&(-1!=a.className.indexOf("bs_show")?$(a).removeClass("bs_show").siblings("ul").slideUp(200):$(a).addClass("bs_show").siblings("ul").slideDown(200))},b.show&&-1==c.parentNode.className.indexOf("bs_show")&&$(c).trigger("click")}),b.checkbox&&$(a).find(".bs_chk").each(function(){var a=this,b=a.parentNode,c=b.parentNode;if(-1!=b.className.indexOf("bs_withsub"))a.myCells=$(b).siblings("ul").find(".bs_chk"),a.check=function(){clearTimeout(a.delayKey);var b=!1,c=!0;a.delayKey=setTimeout(function(){var d,e,f;for(d=0,e=a.myCells.length;e>d;d++)f=a.myCells[d].parentNode,-1==f.className.indexOf("bs_chk_checked")?c=!1:b=!0;$(a).parent().removeClass("bs_chk_checked").removeClass("bs_chk_include"),c?$(a).parent().addClass("bs_chk_checked"):b&&$(a).parent().addClass("bs_chk_include")},40)},a.onclick=function(){var a=this;-1!=a.parentNode.className.indexOf("bs_chk_checked")?($(a).parent().removeClass("bs_chk_checked"),$(a.myCells).each(function(){$(this).parent().removeClass("bs_chk_include").removeClass("bs_chk_checked")})):($(a).parent().addClass("bs_chk_checked"),$(a.myCells).each(function(){$(this).parent().removeClass("bs_chk_include").addClass("bs_chk_checked")})),$(a).parent().removeClass("bs_chk_include")},a.check();else{var d,e=c,f=0;for(a.myParents=[],e=e.parentNode;e&&-1==e.className.indexOf("bs_menu")&&("UL"==e.tagName&&(d=$(e).siblings(".bs_box").find(".bs_chk")[0],d&&a.myParents.push(d)),
f++,!(f>1e3));)e=e.parentNode;a.onclick=function(){var a=this;$(a).parent().toggleClass("bs_chk_checked"),$(a.myParents).each(function(){this.check()})}}}),a.get=function(b){var c=[];switch(b){case"all":$(a).find(".bs_chk").each(function(){this.value&&c.push(this.value)});break;case"checked":$(a).find(".bs_chk_checked").children(".bs_chk").each(function(){this.value&&c.push(this.value)});break;case"unchecked":$(a).find(".bs_chk").each(function(){-1==this.parentNode.className.indexOf("bs_chk_checked")&&this.value&&c.push(this.value)});break;default:$(a).find(".bs_chk").each(function(){this.value&&c.push(this.value)})}return c},a.current=function(b){var c=function(a,b){if(!a||!b)return!1;var c=a.split("#")[0],d=b.split("#")[0];return c==d};$(a).find("a").each(function(){c(this.href,b)?$(this).parent().addClass("bs_cur"):$(this).parent().removeClass("bs_cur")}),$(a).find(".bs_cur").each(function(){var a=this.parentNode;for(a=a.parentNode;a&&-1==a.className.indexOf("bs_menu");)"UL"==a.tagName&&$(a).slideDown(200).siblings(".bs_box").addClass("bs_show"),a=a.parentNode;$(this).siblings("ul").slideDown(200).siblings(".bs_box").addClass("bs_show")})},"string"==typeof b.defaultValue&&(b.defaultValue=b.defaultValue.split(",")),b.checkbox&&isArray(b.defaultValue)&&($(a).find(".bs_chk").each(function(){-1!=b.defaultValue.indexOf(this.value)&&$(this).trigger("click")}),setTimeout(function(){$(a).find(".bs_withsub.bs_chk_include").addClass("bs_show").siblings("ul").show(),$(a).find(".bs_withsub.bs_chk_checked").removeClass("bs_show").siblings("ul").hide()},100)),a.opAttr=b)}),c[0]},nav:{get:function(a){var b=function(){try{return JSON.parse(cookies.get(global.Config.locationMark))}catch(a){return[]}}();if(0===b.length)return{};switch(a){case"end":return b[b.length-1];case"start":return b[0];default:return b[b.length-1]}return{}},set:function(a,b){var c,d,e,f=this,g=function(){try{return JSON.parse(cookies.get(global.Config.locationMark))}catch(a){return[]}}(),h=function(a,b){if(!a||!b)return!1;var c=a.split("#")[0],d=b.split("#")[0];return c==d},i=!1,j="";for(f.menus||(f.menus=[],parent.$(".bs_menu a").each(function(){f.menus.push({url:this.href,name:this.innerText||this.textContent})})),c=0,d=f.menus.length;d>c;c++)e=f.menus[c],h(e.url,a)&&(g=[{name:b,url:a}],i=!0);if(!i)for(c=0,d=g.length;d>c;c++)e=g[c],h(e.url,a)&&(g.splice(0,c+1),i=!0);for(i||g.push({name:b,url:a}),cookies.set(global.Config.locationMark,JSON.stringify(g),1,"/"),c=0,d=g.length;d>c;c++)e=g[c],j+=c!=d-1?'<a href="'+e.url+'">'+e.name+"</a> &gt; ":e.name;parent.$("#nav").html(j),parent.$(".bs_menu")[0].current(g[0].url),parent.request.hash("url",encodeURIComponent(g[0].url))}},remove:function(a){$.cleanData(a),$.cleanData(a.getElementsByTagName("*")),$(a).remove()},empty:function(a){$.cleanData(a.getElementsByTagName("*")),a.innerHTML=""},loading:{isTimeout:!1,init:function(a,b,c){var d=this;(!d.pop||c)&&(d.pop=bsPopup("loading",{content:c||global.Config.ajax.loadingText,show:!1})),clearTimeout(d.timeoutKey),d.isTimeout=!1,d.timeoutKey=setTimeout(function(){d.pop.hide(),mod.dialog("error",{content:global.Config.ajax.timeoutText}),d.isTimeout=!0,"function"==typeof a&&a()},b||global.Config.ajax.timeout),d.pop.show()},clear:function(){var a=this;clearTimeout(a.timeoutKey),a.pop&&a.pop.hide()}},init:function(){var a=this;a.box(),a.tab(),a.button(),a.form(),a.menu()}};var mod=global.mod=new moduleBuild;mod.gird=mod.grid;var bsTimeout=global.bsTimeout=mod.loading;global.Config.page.reset&&pageInit(),mod.init()}}(this);
//# sourceMappingURL=map/bs_global.min.map